webpackJsonp([1],{177:function(e,t,i){"use strict";function a(e){i(468)}Object.defineProperty(t,"__esModule",{value:!0});var n=i(290),r=i(501),o=i(70),s=a,l=o(n.a,r.a,!1,s,"data-v-450eb2ae",null);t.default=l.exports},207:function(e,t,i){"use strict";t.a={props:{src:{type:String,required:!0}},name:"ImgUploader",data:function(){return{status:"ready",files:[],uploadingImgNum:0,uploadedImgNum:0,uploading:!1,percent:0,hide:!0}},watch:{uploadedImgNum:function(e){var t=this,i=Math.round(100*e/this.uploadingImgNum);t.percent=i/100,e==this.uploadingImgNum&&0!=e&&(this.status="finished")}},methods:{add:function(){this.$refs.file.click()},submit:function(){var e=this;if(0===this.files.length)return void console.warn("no file!");this.uploading=!0,this.uploadedImgNum=0,this.uploadingImgNum=this.files.length,this.files.forEach(function(t){if(t.size/1024/1024>2)e.$message.error("图片"+t.name+"过大，上传图片大小不能超过2M");else{var i=new FormData;i.append("userfile",t.file,t.name),e.$http.post(e.src,i).then(function(i){200===i.body.code?console.log("upload success!"):409===i.body.code?e.$message.error("图片"+t.name+"已经存在"):407===i.body.code?e.$message.error("图片"+t.name+"过大，上传图片大小不能超过2M"):e.$message.error("图片"+t.name+"上传失败"),e.uploadedImgNum++},function(i){e.$message.error("图片"+t.name+"上传失败"),console.log("error：error code "+i.body.code)})}})},remove:function(e){this.files.splice(e,1)},fileChanged:function(){for(var e=this.$refs.file.files,t=0;t<e.length;t++)if(!this.isContain(e[t])){var i={name:e[t].name,size:e[t].size,file:e[t]};this.html5Reader(e[t],i),this.files.push(i)}this.$refs.file.value=""},html5Reader:function(e,t){var i=this,a=new FileReader;a.onload=function(e){i.$set(t,"src",e.target.result)},a.readAsDataURL(e)},isContain:function(e){return this.files.find(function(t){return t.name===e.name&&t.size===e.size})},close:function(){this.hide=!0},final:function(){this.hide=!0,this.$emit("uploadSuccess")},open:function(){this.init(),this.hide=!1},init:function(){this.files=[],this.status="ready",this.uploading=!1}}}},234:function(e,t,i){"use strict";function a(e){i(235)}var n=i(207),r=i(237),o=i(70),s=a,l=o(n.a,r.a,!1,s,null,null);t.a=l.exports},235:function(e,t,i){var a=i(236);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("492a225a",a,!0,{})},236:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,'.vue-uploader{display:block}.hide{display:none}.blocker{position:fixed;width:300%;height:300%;left:-100%;top:-100%;z-index:80;background-color:#ffffff6c}.vue-uploader-div{border:1px solid #e5e5e5;position:fixed;z-index:100;margin:auto;left:25%;top:25%;min-width:50%;max-width:50%;background-color:#fff}.file-list{min-height:100px;max-height:600px;overflow-y:auto}.vue-uploader-div .file-list{padding:10px 0}.vue-uploader-div .file-list:after{content:"";display:block;clear:both;visibility:hidden;line-height:0;height:0;font-size:0}.vue-uploader-div .file-list .file-item{float:left;position:relative;width:100px;text-align:center}.vue-uploader-div .file-list .file-item img{width:80px;height:80px;border:1px solid #ececec}.vue-uploader-div .file-list .file-item .file-remove{position:absolute;right:12px;display:none;top:4px;width:14px;height:14px;color:#fff;cursor:pointer;line-height:12px;border-radius:100%;transform:rotate(45deg);background:rgba(0,0,0,.5)}.vue-uploader-div .file-list .file-item:hover .file-remove{display:inline}.vue-uploader-div .file-list .file-item .file-name{margin:0;height:40px;word-break:break-all;font-size:14px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.vue-uploader-div .add{width:80px;height:80px;margin-left:10px;float:left;text-align:center;line-height:80px;border:1px dashed #ececec;font-size:30px;cursor:pointer}.vue-uploader-div .upload-func{display:flex;padding:10px;margin:0;background:#f8f8f8;border-top:1px solid #ececec}.vue-uploader-div .upload-func .progress-bar{flex-grow:1}.vue-uploader-div .upload-func .progress-bar section{margin-top:5px;background:#00b4aa;border-radius:3px;text-align:center;color:#fff;font-size:12px;transition:all .5s ease}.vue-uploader-div .upload-func .operation-box{flex-grow:0;padding-left:10px}.vue-uploader-div .upload-func .operation-box button{padding:4px 12px;color:#fff;background:#007acc;border:none;border-radius:2px;cursor:pointer}.vue-uploader-div>input[type=file]{display:none}',""])},237:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:[e.hide?"hide":"","vue-uploader"]},[i("div",{staticClass:"blocker"}),e._v(" "),i("div",{staticClass:"vue-uploader-div"},[i("div",{staticClass:"file-list"},[e._l(e.files,function(t,a){return i("section",{key:a,staticClass:"file-item draggable-item"},[i("img",{attrs:{src:t.src,alt:"",ondragstart:"return false;"}}),e._v(" "),i("p",{staticClass:"file-name"},[e._v(e._s(t.name))]),e._v(" "),i("span",{staticClass:"file-remove",on:{click:function(t){e.remove(a)}}},[e._v("+")])])}),e._v(" "),"ready"==e.status?i("section",{staticClass:"file-item"},[i("div",{staticClass:"add",on:{click:e.add}},[i("span",[e._v("+")])])]):e._e()],2),e._v(" "),i("section",{staticClass:"upload-func"},[i("div",{staticClass:"progress-bar"},[e.uploading?i("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:100*e.percent}}):e._e()],1),e._v(" "),i("div",{staticClass:"operation-box"},["finished"!=e.status?i("button",{on:{click:e.close}},[e._v("关闭")]):e._e(),e._v(" "),"ready"==e.status?i("button",{on:{click:e.submit}},[e._v("上传")]):e._e(),e._v(" "),"finished"==e.status?i("button",{on:{click:e.final}},[e._v("完成")]):e._e()])]),e._v(" "),i("input",{ref:"file",attrs:{type:"file",accept:"image/*",multiple:"multiple"},on:{change:e.fileChanged}})])])},n=[],r={render:a,staticRenderFns:n};t.a=r},238:function(e,t,i){"use strict";function a(e){i(476)}var n=i(293),r=i(478),o=i(70),s=a,l=o(n.a,r.a,!1,s,"data-v-e298fd94",null);t.a=l.exports},290:function(e,t,i){"use strict";var a=i(470),n=i(481),r=i(489),o=i(497);t.a={components:{OthersTable:o.a,BargainTable:a.a,RoundTable:n.a,LotteryTable:r.a},data:function(){return{activeName:"first",currentTabName:"BargainTable"}},computed:{currentTabComponent:function(){return this.currentTabName}},mounted:function(){this.$store.commit("setLoadingStatus",!1)},methods:{handleClick:function(e,t){switch(e.name){case"first":this.currentTabName="BargainTable";break;case"second":this.currentTabName="RoundTable";break;case"third":this.currentTabName="LotteryTable";break;case"fourth":this.currentTabName="OthersTable"}}}}},291:function(e,t,i){"use strict";var a=i(473);t.a={components:{newBargainDialog:a.a},data:function(){return{loading:!1,loadingText:"玩命加载中",bargainAmount:0,maxPage:0,pageNo:1,pageSize:10,fliterStr:"",showNewBargainForm:!1,multipleSelection:[],st:0,ed:0,editing:-1,bargains:[{state:1,isEditing:!1,start_time:0,end_time:10}]}},mounted:function(){this.refreshPage()},computed:{isEditing:function(){return-1!==this.editing}},methods:{refreshPage:function(){var e=this;this.pageLeaveEnsure(function(t){t&&(e.$store.commit("setLoadingStatus",!0),e.getBargainAmount(),e.getBargainByPage(e.pageNo))})},pageLeaveEnsure:function(e){var t=this;this.isEditing?this.$confirm("当前仍有正在进行的编辑，确定要放弃这些编辑加载新的一页?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.giveUpEdit({isEditing:!1}),e(!0)}).catch(function(){t.$message.info("已取消"),e(!1)}):e(!0)},handleSizeChange:function(e){var t=this;this.pageLeaveEnsure(function(i){i?(t.pageNo=t.lastPage=1,t.lastSize=t.pageSize=e,t.refreshPage()):t.pageSize=t.lastSize})},handleCurrentChange:function(e){var t=this;this.pageLeaveEnsure(function(i){i?(t.pageNo=t.lastPage=e,t.refreshPage()):t.pageNo=t.lastPage})},handleFliterChange:function(e){switch(e){case 0:this.fliterStr="/soon";break;case 1:this.fliterStr="/going";break;case 2:this.fliterStr="/stopped";break;case-1:this.fliterStr="/invalid";break;case-2:this.fliterStr=""}this.handleCurrentChange(1)},modifiedBargain:function(e){switch(e.isEditing=!1,e.id=this.util.toValidNumber(e.id),e.times_left=this.util.toValidNumber(e.times_left),e.books_left=this.util.toValidNumber(e.books_left),e.start_time=1e3*this.util.toValidNumber(e.start_time),e.end_time=1e3*this.util.toValidNumber(e.end_time),e.state=this.util.toValidNumber(e.state),e.state){case 0:e.stateName="未开始";break;case 1:e.stateName="进行中";break;case 2:e.stateName="已结束";break;default:e.stateName="不合法"}return e},addBargain:function(){if(this.isEditing)return void this.$message.error("请先完成当前进行中的修改");this.showNewBargainForm=!0},givpUpAdd:function(){this.showNewBargainForm=!1},givpUpEdit:function(e){this.st=0,this.ed=0,this.editing=-1,this.$store.commit("setEditStatus",!1),e.isEditing=!1},editBargain:function(e){if(this.isEditing)return void this.$message.error("请先完成当前进行中的修改");this.editing=e.id,this.st=e.start_time,this.ed=e.end_time,e.isEditing=!0,this.$store.commit("setEditStatus",!0)},saveBargain:function(e){if(e.start_time>=e.end_time)return void this.$message.error("结束时间应当比开始时间晚");var t=this.st===e.start_time?-1:e.start_time/1e3,i=this.ed===e.end_time?-1:e.end_time/1e3;this.$store.commit("setLoadingStatus",!0),this.putBargainTimeChange(e.id,t,i),this.givpUpEdit(e),this.refreshPage()},recoverBargain:function(e){e.start_time=this.st,e.end_time=this.ed,this.givpUpEdit(e)},deleteBargain:function(e){if(this.isEditing)return void this.$message.error("请先完成当前进行中的修改");this.$store.commit("setLoadingStatus",!0),this.removeBargain(e.id)},getBargainAmount:function(){var e=this;this.$http.get(this.$store.state.host+"/adminpannel/bargains"+this.fliterStr+"/amount",{emulateJSON:!0}).then(function(t){var i=t.body.code;if(e.util.sessionCheck(e,i))switch(i){case 200:e.bargainAmount=t.body.info;break;default:e.util.returnFailHandler(t)}},this.util.returnFailHandler)},putBargainTimeChange:function(e,t,i){var a=this;-1!==t&&this.$http.put(this.$store.state.host+"/adminpannel/activities/endtime/"+e+"/"+t,{start_time:t},{emulateJSON:!0}).then(function(e){var t=e.body.code;if(a.util.sessionCheck(a,t))switch(t){case 404:a.$message.error("非法的活动id");break;case 405:a.$message.error("无效或不存在的活动");break;case 437:a.$message.error("开始时间不应比当前时间早，也不能比结束时间晚");break;case 200:a.$message.success("修改开始时间成功!");break;default:a.util.returnFailHandler(e)}},this.util.returnFailHandler),-1!==i&&this.$http.put(this.$store.state.host+"/adminpannel/activities/endtime/"+e+"/"+i,{end_time:i},{emulateJSON:!0}).then(function(e){var t=e.body.code;if(a.util.sessionCheck(a,t))switch(t){case 404:a.$message.error("非法的活动id");break;case 405:a.$message.error("无效或不存在的活动");break;case 437:a.$message.error("结束时间不应比当前时间或开始时间晚");break;case 200:a.$message.success("修改结束时间成功!");break;default:a.util.returnFailHandler(e)}},this.util.returnFailHandler)},getBargainByPage:function(e){var t=this;this.$http.get(this.$store.state.host+"/adminpannel/bargains"+this.fliterStr+"/"+e+"/"+this.pageSize,{emulateJSON:!0}).then(function(e){t.$store.commit("setLoadingStatus",!1);var i=e.body.code;if(t.util.sessionCheck(t,i))switch(i){case 402:t.$message.error("非法的页码");break;case 200:t.bargains=[];e.body.info.forEach(function(e){t.bargains.push(t.modifiedBargain(e))});break;default:t.util.returnFailHandler(e)}},this.util.returnFailHandler)},removeBargain:function(e){var t=this;this.$http.delete(this.$store.state.host+"/adminpannel/bargain/"+e,{emulateJSON:!0}).then(function(e){t.$store.commit("setLoadingStatus",!1);var i=e.body.code;if(t.util.sessionCheck(t,i))switch(i){case 404:t.$message.error("非法的活动id");break;case 405:t.$message.error("不存在的活动");break;case 200:return t.$message.success("删除成功"),void t.refreshPage();default:t.util.returnFailHandler(e)}},this.util.returnFailHandler)}}}},292:function(e,t,i){"use strict";var a=i(238);t.a={props:{visiable:!1},components:{BookPicker:a.a},data:function(){var e=this,t=function(t,i,a){var n=e.util.toValidNumber(i,!1,!0);"empty"===n||"error"===n||0===n?a(new Error("请选择合法的书籍")):(e.newBargain.book_id=n,a())},i=function(t,i,a){var n=e.util.toValidNumber(i,!1,!0);"empty"===n?a(new Error("请输入最小值")):"error"===n?a(new Error("请输入合法的0~100间的整数")):(e.newBargain.min=n,n>100?a(new Error("请输入0~100间的整数")):(null!==e.newBargain.times&&n*e.newBargain.times>100&&a(new Error("砍价最低理论值会小于0")),null!==e.newBargain.max&&e.$refs.newBargain.validateField("max"),a()))},a=function(t,i,a){var n=e.util.toValidNumber(i,!1,!0);"empty"===n?a(new Error("请输入最大值")):"error"===n?a(new Error("请输入合法的0~100间的整数")):(e.newBargain.max=n,n>100?a(new Error("请输入0~100间的整数")):n<e.newBargain.min?a(new Error("最大值不应比最小值小")):1===e.newBargain.type&&null!==e.newBargain.times&&n*e.newBargain.times>100&&a(new Error("砍价最低理论值会小于0")),a())},n=function(t,i,a){var n=e.util.toValidNumber(i,!1,!0);"empty"===n?a(new Error("请输入次数")):"error"===n||0==n?a(new Error("请输入合法的正整数")):(e.newBargain.times=n,e.validateType(),a())},r=function(t,i,a){var n=e.util.toValidNumber(i,!1,!0);"empty"===n?a(new Error("请输入砍价的起价")):"error"===n||0===n?a(new Error("请输入合法的正整数")):(e.newBargain.price=n,a())},o=function(t,i,a){var n=e.util.toValidNumber(i,!1,!0);"empty"===n?a(new Error("请输入参与活动的书籍书目")):"error"===n?a(new Error("请输入合法的非负整数")):(e.newBargain.amount=n,a())};return{show:!1,showBookPicker:!1,selectedBook:{id:null,name:null,cover:null},newBargain:{book_id:null,min:null,max:null,times:null,type:0,price:null,title:null,amount:null,introduction:null,start_time:0,end_time:0},st:0,ed:0,rules:{book_id:[{validator:t,trigger:"blur"}],min:[{validator:i,trigger:"blur"}],max:[{validator:a,trigger:"blur"}],times:[{validator:n,trigger:"blur"}],price:[{validator:r,trigger:"blur"}],title:[{validator:function(e,t,i){null===t||0===t.length?i(new Error("请输入标题")):i()},trigger:"blur"}],amount:[{validator:o,trigger:"blur"}],introduction:[{validator:function(e,t,i){null===t||0===t.length?i(new Error("请输入活动介绍")):i()},trigger:"blur"}],start_time:[{validator:function(t,i,a){i=e.st,null===i||0===i?a(new Error("请选择起始时间")):i<=(new Date).getTime()?a(new Error("起始时间不应比现在的时间早")):(0!==e.ed&&e.$refs.newBargain.validateField("end_time"),a())},trigger:"blur"}],end_time:[{validator:function(t,i,a){i=e.ed,null===i||0===i?a(new Error("请选择结束时间")):i<=(new Date).getTime()?a(new Error("结束时间不应比现在的时间早")):i<e.st?a(new Error("结束时间不应比起始时间早")):a()},trigger:"blur"}]}}},watch:{visiable:function(e){this.show=e,!0===e&&(this.st=24*parseInt((new Date).getTime()/1e3/60/60/24)*60*60*1e3+36e5,this.ed=this.st+6048e5)}},computed:{minAndMax:function(){var e=this.newBargain,t=this.util.toValidNumber(e.price,!1,!0),i=this.util.toValidNumber(e.min,!1,!0),a=this.util.toValidNumber(e.max,!1,!0),n=this.util.toValidNumber(e.times,!1,!0),r=this.newBargain.type;return"empty"===t||"error"===t||"empty"===a||"error"===a||"empty"===i||"error"===i||"empty"===n||"error"===n?"":a>100||i>100||a<i?"":0===r?Math.ceil(t*Math.pow(1-a/100,n))+"~"+Math.ceil(t*Math.pow(1-i/100,n)):1===r?Math.ceil(t*(1-a*n/100))+"~"+Math.ceil(t*(1-i*n/100)):""},bargainType:function(){return this.newBargain.type}},methods:{validateType:function(){0!==this.newBargain.price&&null!==this.newBargain.price&&(null!==this.newBargain.min&&this.$refs.newBargain.validateField("min"),null!==this.newBargain.max&&this.$refs.newBargain.validateField("max"))},handleDialogClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(i){e(),t.giveUpAdd()}).catch(function(e){})},beginPick:function(){this.showBookPicker=!0},giveUpPick:function(){this.showBookPicker=!1},selectBook:function(e){this.selectedBook=e,this.newBargain.book_id=e.id},giveUpAdd:function(){this.$emit("hide"),this.$refs.newBargain.resetFields(),this.newBargain={book_id:null,min:null,max:null,times:null,type:0,price:null,title:null,amount:null,introduction:null,start_time:0,end_time:0},this.st=0,this.ed=0},submitAdd:function(){var e=this;this.$refs.newBargain.validate(function(t){t&&e.$confirm("这些信息以后将无法修改，确认已完成编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.commit("setLoadingStatus",!0),e.postBargain(e.newBargain)}).catch(function(){})})},postBargain:function(e){var t=this;e.start_time=parseInt(this.st/1e3),e.end_time=parseInt(this.ed/1e3),this.$http.post(this.$store.state.host+"/adminpannel/bargain",e,{emulateJSON:!0}).then(function(e){t.$store.commit("setLoadingStatus",!1);var i=e.body.code;if(t.util.sessionCheck(t,i))switch(i){case 412:t.$message.error("已存在此活动");break;case 421:t.$message.error("数据错误");break;case 422:t.$message.error("最低价为负数");break;case 200:t.$message.success("添加成功!"),t.giveUpAdd(),t.$emit("refreshPage");break;default:t.util.returnFailHandler(e)}},this.util.returnFailHandler)}}}},293:function(e,t,i){"use strict";t.a={props:{visiable:!1,selectedBook:null},data:function(){return{show:!1,page:1,amount:0,keyword:null,fliter:{keyword:{name:null,author:null},where:{},order:{id:1,name:1}},selected:{id:null,name:null,author:null},emptyBook:{id:null,name:null,author:null},books:[]}},watch:{visiable:function(e){this.show=e},selectedBook:function(e){this.selected=e}},computed:{},mounted:function(){this.refreshPage()},methods:{refreshPage:function(){this.$store.commit("setLoadingStatus",!0),this.getBookAmount(),this.getBookByPage(this.page)},handleCurrentChange:function(e){this.page=e,this.refreshPage()},handleDialogClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(i){e(),t.giveUpAdd()}).catch(function(e){})},selectBook:function(e){e.id===this.selected.id?this.selected={id:null,name:null,author:null}:this.selected=e},searchBook:function(){this.fliter.keyword.name=this.keyword,this.fliter.keyword.author=this.keyword,this.refreshPage()},giveUpAdd:function(){this.$emit("hide"),this.show=!1,this.selected.id!==this.selectedBook.id&&(this.selected=this.selectedBook)},submitAdd:function(){this.$emit("selectBook",this.selected),this.giveUpAdd()},getBookAmount:function(){var e=this;this.$http.post(this.$store.state.host+"/adminpannel/books/page/0/0",{keyword:JSON.stringify(this.fliter.keyword),where:JSON.stringify(this.fliter.where),order:JSON.stringify(this.fliter.order)},{emulateJSON:!0}).then(function(t){var i=t.body.code;if(e.util.sessionCheck(e,i))switch(i){case 402:e.$message.error("非法的页码");break;case 200:e.amount=t.body.info;break;default:e.util.returnFailHandler(t)}},this.util.returnFailHandler)},getBookByPage:function(e){var t=this;this.$http.post(this.$store.state.host+"/adminpannel/books/page/"+e+"/15",{keyword:JSON.stringify(this.fliter.keyword),where:JSON.stringify(this.fliter.where),order:JSON.stringify(this.fliter.order)},{emulateJSON:!0}).then(function(e){t.$store.commit("setLoadingStatus",!1);var i=e.body.code;if(t.util.sessionCheck(t,i))switch(i){case 402:t.$message.error("非法的页码");break;case 200:t.books=e.body.info;break;default:t.util.returnFailHandler(e)}},this.util.returnFailHandler)}}}},294:function(e,t,i){"use strict";var a=i(484),n=i(238);t.a={data:function(){var e=this,t=function(t,i,a){var n=e.util.toValidNumber(i,!1,!0);"empty"===n?a(new Error("请输入合法的正整数")):"error"===n||n<0?a(new Error("请输入合法的非负整数")):a()};return{loading:!1,loadingText:"玩命加载中",roundAmount:0,maxPage:0,pageNo:1,pageSize:10,fliterStr:"",editingRowId:0,showNewRoundForm:!1,newRewardDialogVisible:!1,bookPickerDialogVisible:!1,selectedBook:null,multipleSelection:[],newRound:{},tempReward:{},newReward:{},rounds:[],rewardType:[{value:0,label:"书籍"},{value:1,label:"优惠券"},{value:2,label:"积分"},{value:3,label:"实物奖品"}],isEditing:!1,rules:{title:[{required:!0,min:1,message:"请输入奖品名称",trigger:"blur"}],category:[{required:!0,message:"请选择奖品类型",trigger:"blur"}],percent:[{required:!0,validator:function(t,i,a){var n=e.util.toValidNumber(i,!1,!0);"empty"===n?a(new Error("请输入中奖权重")):"error"===n||n>100?a(new Error("请输入合法的0~100间的整数")):a()},trigger:"blur"}],amount:[{required:!0,validator:t,message:"请输入奖品总数",trigger:"blur"}],name:[{required:!0,message:"请选择书籍",trigger:"blur"}],text:[{required:!0,message:"请输入优惠券兑换码",trigger:"blur"}],credit:[{required:!0,validator:t,trigger:"blur"}]}}},components:{newRoundDialog:a.a,bookPicker:n.a},mounted:function(){this.refreshPage(),this.$store.commit("setLoadingStatus",!1)},computed:{},methods:{refreshPage:function(){this.getRoundAmount(),this.maxPage=Math.ceil(this.roundAmount/this.pageSize),this.getRoundByPage(this.pageNo)},handleSizeChange:function(e){this.pageNo=1,this.pageSize=e,this.refreshPage()},handleCurrentChange:function(e){this.pageNo=e,this.refreshPage()},handleFliterChange:function(e){switch(e){case 0:this.fliterStr="/soon";break;case 1:this.fliterStr="/going";break;case 2:this.fliterStr="/stopped";break;case-1:this.fliterStr="/invalid";break;case-2:this.fliterStr=""}this.handleCurrentChange(1)},handleBookPicker:function(e){this.selectedBook=e,this.newReward.name=e.name,this.newReward.book_id=e.id,this.bookPickerDialogVisible=!1},handleDialogClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(i){e(),t.giveUpAdd()}).catch(function(e){})},modifiedRound:function(e){var t=this;switch(e.isEditing=!1,e.id=this.util.toValidNumber(e.id),e.cost=this.util.toValidNumber(e.cost),e.times=this.util.toValidNumber(e.times),e.start_time=1e3*this.util.toValidNumber(e.start_time),e.end_time=1e3*this.util.toValidNumber(e.end_time),e.state=this.util.toValidNumber(e.state),e.state){case 0:e.stateName="未开始";break;case 1:e.stateName="进行中";break;case 2:e.stateName="已结束";break;default:e.stateName="不合法"}var i=e.rewards;return e.rewards=[],i.forEach(function(i){e.rewards.push(t.modifiedReward(i))}),e},modifiedReward:function(e){switch(e.isEditing=!1,e.id=this.util.toValidNumber(e.id),e.category=this.util.toValidNumber(e.category),e.percent=this.util.toValidNumber(e.percent),e.amount=this.util.toValidNumber(e.amount),e.category){case 0:e.categoryName="书籍";break;case 1:e.categoryName="优惠券";break;case 2:e.categoryName="积分";break;default:e.categoryName="实物奖品"}return e},addRound:function(){this.showNewRoundForm=!0},giveUpRoundAdd:function(){this.showNewRoundForm=!1},editRound:function(e){if(this.isEditing)return void this.$message({message:"请先完成之前的编辑操作",type:"warning"});this.newRound.end_time=e.end_time,this.newRound.start_time=e.start_time,e.isEditing=!0,this.isEditing=!0,this.$store.commit("setEditStatus",!0)},saveRound:function(e){if(e.start_time>=e.end_time)return void this.$message.error("结束时间应当比开始时间晚");var t=this.newRound.start_time===e.start_time?-1:e.start_time/1e3,i=this.newRound.end_time===e.end_time?-1:e.end_time/1e3;this.putRoundTimeChange(e.id,t,i),this.newRound.start_time=0,this.newRound.end_time=0,e.isEditing=!1,this.isEditing=!1,this.$store.commit("setEditStatus",!1)},recoverRound:function(e){e.start_time=this.newRound.start_time,e.end_time=this.newRound.end_time,e.isEditing=!1,this.isEditing=!1,this.$store.commit("setEditStatus",!1)},deleteRound:function(e){var t=this;this.$confirm("确认删除？").then(function(i){t.removeRound(e.id)}).catch(function(e){})},editReward:function(e,t){if(this.isEditing)return void this.$message({message:"请先完成之前的编辑操作",type:"warning"});Object.assign(this.newReward,e),this.editingRowId=t.id,this.isEditing=!0,this.newRewardDialogVisible=!0,this.$store.commit("setEditStatus",!0)},saveReward:function(){var e=this;this.$refs.rewardForm.validate(function(t){if(t){var i={title:e.newReward.title,category:e.newReward.category,percent:e.newReward.percent,amount:e.newReward.amount};switch(i.category){case 0:i.back=e.newReward.book_id;break;case 1:i.back=e.newReward.text;break;case 2:i.back=e.newReward.credit;break;default:i.back=e.newReward.text}e.newReward.hasOwnProperty("id")&&(i.id=e.newReward.id),e.$http.post(e.$store.state.host+"/adminpannel/round/"+e.editingRowId,i,{emulateJSON:!0}).then(function(t){e.util.sessionCheck(e,t.body.code)&&200===t.body.code?(e.$message.success("添加成功!"),e.newRewardDialogVisible=!1,e.refreshPage(),e.isEditing=!1,e.$store.commit("setEditStatus",!1)):e.$message.error("添加失败，请检查输入信息")},e.util.returnFailHandler)}})},deleteReward:function(e){var t=this;this.$confirm("确认删除？删除后订单页将无法看到该奖品信息。").then(function(i){t.removeReward(e.id)}).catch(function(e){})},addNewReward:function(e){if(this.isEditing)return void this.$message({message:"请先完成之前的编辑操作",type:"warning"});this.newReward={category:0,title:"",name:"",text:"",credit:0,percent:0,amount:0},this.isEditing=!0,this.editingRowId=e.id,this.newRewardDialogVisible=!0,this.$store.commit("setEditStatus",!0)},giveUpAdd:function(){this.isEditing=!1,this.newRewardDialogVisible=!1,this.$store.commit("setEditStatus",!1)},getRoundAmount:function(){var e=this;this.$http.get(this.$store.state.host+"/adminpannel/rounds"+this.fliterStr+"/amount",{emulateJSON:!0}).then(function(t){e.util.sessionCheck(e,t.body.code)&&200===t.body.code?e.roundAmount=e.util.toValidNumber(t.body.info):e.$message.error("未知错误，请联系维护人员")},this.util.returnFailHandler)},putRoundTimeChange:function(e,t,i){var a=this;-1!==t&&this.$http.put(this.$store.state.host+"/adminpannel/activities/endtime/"+e+"/"+t,null,{emulateJSON:!0}).then(function(e){var t=e.body.code;if(a.util.sessionCheck(t))switch(t){case 404:a.$message.error("非法的活动id");break;case 405:a.$message.error("无效或不存在的活动");break;case 437:a.$message.error("开始时间不应比当前时间早，也不能比结束时间晚");break;case 200:a.$message.success("修改开始时间成功!"),a.refreshPage();break;default:a.util.returnFailHandler()}},this.util.returnFailHandler),-1!==i&&this.$http.put(this.$store.state.host+"/adminpannel/activities/endtime/"+e+"/"+i,null,{emulateJSON:!0}).then(function(e){var t=e.body.code;if(a.util.sessionCheck(t))switch(t){case 404:a.$message.error("非法的活动id");break;case 405:a.$message.error("无效或不存在的活动");break;case 437:a.$message.error("结束时间不应比当前时间或开始时间晚");break;case 200:a.$message.success("修改结束时间成功!"),a.refreshPage();break;default:a.util.returnFailHandler()}},this.util.returnFailHandler)},getRoundByPage:function(e){var t=this;this.$http.get(this.$store.state.host+"/adminpannel/rounds"+this.fliterStr+"/"+e+"/"+this.pageSize,{emulateJSON:!0}).then(function(e){if(t.util.sessionCheck(t,e.body.code)&&200===e.body.code){t.rounds=[];e.body.info.forEach(function(e){t.rounds.push(t.modifiedRound(e))})}else t.$message.error("未知错误，请联系维护人员")},this.util.returnFailHandler)},removeReward:function(e){var t=this;this.$http.delete(this.$store.state.host+"/adminpannel/reward/"+e,{emulateJSON:!0}).then(function(e){t.util.sessionCheck(t,e.body.code)&&200===e.body.code?(t.$message.success("删除成功"),t.refreshPage()):t.$message.error("未知错误，请联系维护人员")},this.util.returnFailHandler)},removeRound:function(e){var t=this;this.$http.delete(this.$store.state.host+"/adminpannel/round/"+e,{emulateJSON:!0}).then(function(e){t.util.sessionCheck(t,e.body.code)&&200===e.body.code?(t.$message.success("删除成功"),t.refreshPage()):t.$message.error("未知错误，请联系维护人员")},this.util.returnFailHandler)}}}},295:function(e,t,i){"use strict";t.a={props:{visiable:!1},data:function(){var e=this,t=function(t,i,a){var n=e.util.toValidNumber(i,!1,!0);"empty"===n?a(new Error("请输入次数")):"error"===n||0==i?a(new Error("请输入合法的正整数")):(e.newRound.times=n,a())},i=function(t,i,a){var n=e.util.toValidNumber(i,!1,!0);"empty"===n?a(new Error("请输入轮盘消耗的积分")):"error"===n||0==i?a(new Error("请输入合法的非负整数")):(e.newRound.price=n,a())},a=function(e,t,i){null===t||0===t.length?i(new Error("请输入轮盘活动的标题")):i()},n=function(e,t,i){null===t||0===t.length?i(new Error("请输入活动介绍")):i()};return{show:!1,newRound:{times:null,cost:null,title:null,brief:null,details:null,start_time:0,end_time:0},rules:{times:[{validator:t,trigger:"blur"}],cost:[{validator:i,trigger:"blur"}],title:[{validator:a,trigger:"blur"}],brief:[{validator:n,trigger:"blur"}],details:[{validator:n,trigger:"blur"}],start_time:[{validator:function(t,i,a){null===i||0===i?a(new Error("请选择起始日期")):(0!==e.newRound.end_time&&e.$refs.newRound.validateField("end_time"),a())},trigger:"blur"}],end_time:[{validator:function(t,i,a){null===i||0===i?a(new Error("请选择结束日期")):i<e.newRound.start_time?a(new Error("结束时间不应比起始时间早")):a()},trigger:"blur"}]}}},watch:{visiable:function(e){this.show=e,!0===e&&(this.newRound.start_time=24*parseInt((new Date).getTime()/1e3/60/60/24)*60*60*1e3,this.newRound.end_time=this.newRound.start_time+6048e5)}},computed:{minAndMax:function(){var e=this.newRound,t=this.util.toValidNumber(e.price,!1,!0),i=this.util.toValidNumber(e.min,!1,!0),a=this.util.toValidNumber(e.max,!1,!0),n=this.util.toValidNumber(e.times,!1,!0),r=this.newRound.type;return"empty"===t||"error"===t||"empty"===a||"error"===a||"empty"===i||"error"===i||"empty"===n||"error"===n?"":a>100||i>100||a<i?"":0===r?Math.ceil(t*Math.pow(1-a/100,n))+"~"+Math.ceil(t*Math.pow(1-i/100,n)):1===r?Math.ceil(t*(1-a*n/100))+"~"+Math.ceil(t*(1-i*n/100)):""}},methods:{handleDialogClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(i){e(),t.giveUpAdd()}).catch(function(e){})},giveUpAdd:function(){this.$emit("hide"),this.$refs.newRound.resetFields(),this.newRound={times:null,cost:null,title:null,brief:null,details:null,start_time:0,end_time:0}},submitAdd:function(){var e=this;this.$refs.newRound.validate(function(t){t&&e.$confirm("这些信息以后将无法修改，确认已完成编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.postRound(e.newRound)}).catch(function(){})})},postRound:function(e){var t=this;e.start_time/=1e3,e.end_time/=1e3;for(var i in e)console.log(e[i]);this.$http.post(this.$store.state.host+"/adminpannel/round",e,{emulateJSON:!0}).then(function(i){t.util.sessionCheck(t,i.body.code)&&200===i.body.code?(t.$message.success("添加成功!"),t.giveUpAdd(),t.$emit("refreshPage")):(e.start_time*=1e3,e.end_time*=1e3,console.log("error"),t.$message.error("未知错误，请联系维护人员"))},function(i){e.start_time*=1e3,e.end_time*=1e3,console.log("error"),t.$message.error("未知错误，请联系维护人员")})}}}},296:function(e,t,i){"use strict";var a=i(492);t.a={data:function(){return{loading:!1,loadingText:"玩命加载中",lotteryAmount:0,maxPage:0,pageNo:1,pageSize:10,fliterStr:"",showNewLotteryForm:!1,multipleSelection:[],st:0,ed:0,editing:-1,lotteries:[]}},components:{newLotteryDialog:a.a},mounted:function(){this.refreshPage()},watch:{isEditing:function(e){e?this.$store.commit("setEditStatus",!0):this.$store.commit("setEditStatus",!1)}},computed:{isEditing:function(){return-1!==this.editing}},methods:{refreshPage:function(){this.getLotteryAmount(),this.maxPage=Math.ceil(this.lotteryAmount/this.pageSize),this.getLotteryByPage(this.pageNo)},handleSizeChange:function(e){this.pageNo=1,this.pageSize=e,this.refreshPage()},handleCurrentChange:function(e){this.pageNo=e,this.refreshPage()},handleFliterChange:function(e){switch(e){case 0:this.fliterStr="/soon";break;case 1:this.fliterStr="/going";break;case 2:this.fliterStr="/stopped";break;case-1:this.fliterStr="/invalid";break;case-2:this.fliterStr=""}this.handleCurrentChange(1)},modifiedLottery:function(e){switch(e.isEditing=!1,e.id=this.util.toValidNumber(e.id),e.credits_need=this.util.toValidNumber(e.credits_need),e.book_num=this.util.toValidNumber(e.rewards_info.booknum),e.book_id=this.util.toValidNumber(e.rewards_info.bookid),e.start_time=1e3*this.util.toValidNumber(e.start_time),e.end_time=1e3*this.util.toValidNumber(e.end_time),e.open=1===this.util.toValidNumber(e.state),e.state=this.util.toValidNumber(e.state_detail),e.state){case 0:e.stateName="未开始";break;case 1:e.stateName="进行中";break;case 2:e.stateName="已结束";break;default:e.stateName="不合法"}return e},addLottery:function(){if(this.isEditing)return void this.$message.error("请先完成当前进行中的修改");this.showNewLotteryForm=!0},givpUpAdd:function(){this.showNewLotteryForm=!1},editLottery:function(e){if(this.isEditing)return void this.$message.error("请先完成当前进行中的修改");this.editing=e.id,this.st=e.start_time,this.ed=e.end_time,e.isEditing=!0},saveLottery:function(e){if(e.start_time>=e.end_time)return void this.$message.error("结束时间应当比开始时间晚");var t=this.st===e.start_time?-1:e.start_time/1e3,i=this.ed===e.end_time?-1:e.end_time/1e3;this.putLotteryTimeChange(e.id,t,i),this.editing=-1,e.isEditing=!1,this.refreshPage()},recoverLottery:function(e){e.start_time=this.st,e.end_time=this.ed,this.ed=0,this.st=0,this.editing=-1,e.isEditing=!1},deleteLottery:function(e){if(this.isEditing)return void this.$message.error("请先完成当前进行中的修改");this.removeLottery(e.id)},getLotteryAmount:function(){var e=this;this.$http.get(this.$store.state.host+"/adminpannel/lottery"+this.fliterStr+"/amount",{emulateJSON:!0}).then(function(t){e.util.sessionCheck(e,t.body.code)&&200===t.body.code?e.lotteryAmount=e.util.toValidNumber(t.body.info):e.util.returnFailHandler()},this.util.returnFailHandler)},putLotteryTimeChange:function(e,t,i){var a=this;-1!==t&&this.$http.put(this.$store.state.host+"/adminpannel/activities/endtime/"+e+"/"+t,{start_time:t},{emulateJSON:!0}).then(function(e){var t=e.body.code;if(a.util.sessionCheck(a,t))switch(t){case 404:a.$message.error("非法的活动id");break;case 405:a.$message.error("无效或不存在的活动");break;case 437:a.$message.error("开始时间不应比当前时间早，也不能比结束时间晚");break;case 200:a.$message.success("修改开始时间成功!");break;default:a.util.returnFailHandler(e)}},this.util.returnFailHandler),-1!==i&&this.$http.put(this.$store.state.host+"/adminpannel/activities/endtime/"+e+"/"+i,{end_time:i},{emulateJSON:!0}).then(function(e){var t=e.body.code;if(a.util.sessionCheck(a,t))switch(t){case 404:a.$message.error("非法的活动id");break;case 405:a.$message.error("无效或不存在的活动");break;case 437:a.$message.error("结束时间不应比当前时间或开始时间晚");break;case 200:a.$message.success("修改结束时间成功!");break;default:a.util.returnFailHandler(e)}},this.util.returnFailHandler)},checkLottery:function(e){var t=this;this.$http.get(this.$store.state.host+"/adminpannel/lottery/getById/"+e.id,{emulateJSON:!0}).then(function(e){t.util.sessionCheck(t,e.body.code)&&200===e.body.code?(t.$message.success("开奖!"),t.refreshPage()):t.util.returnFailHandler()},this.util.returnFailHandler)},getLotteryByPage:function(e){var t=this;this.$http.get(this.$store.state.host+"/adminpannel/lottery"+this.fliterStr+"/"+e+"/"+this.pageSize,{emulateJSON:!0}).then(function(e){if(t.util.sessionCheck(t,e.body.code)&&200===e.body.code){t.lotteries=[];e.body.info.forEach(function(e){t.lotteries.push(t.modifiedLottery(e))})}else t.util.returnFailHandler()},this.util.returnFailHandler)},removeLottery:function(e){var t=this;this.$http.delete(this.$store.state.host+"/adminpannel/Lottery/"+e,{emulateJSON:!0}).then(function(e){t.util.sessionCheck(t,e.body.code)&&200===e.body.code?(t.$message.success("删除成功"),t.refreshPage()):t.util.returnFailHandler()},this.util.returnFailHandler)}}}},297:function(e,t,i){"use strict";var a=i(238);t.a={props:{visiable:!1},components:{bookPicker:a.a},data:function(){var e=this,t=function(e,t,i){null===t||0===t.length?i(new Error("请选择书籍")):i()},i=function(t,i,a){var n=e.util.toValidNumber(i,!1,!0);"empty"===n?a(new Error("请输入奖池中的书本数")):"error"===n||0==i?a(new Error("请输入合法的正整数")):(e.newLottery.times=n,a())},a=function(t,i,a){var n=e.util.toValidNumber(i,!1,!0);"empty"===n?a(new Error("请输入每次抽奖消耗的积分")):"error"===n?a(new Error("请输入合法的非负整数")):(e.newLottery.price=n,a())},n=function(e,t,i){null===t||0===t.length?i(new Error("请输入内容")):i()},r=function(e,t,i){null===t||0===t.length?i(new Error("请输入活动介绍")):i()};return{show:!1,newLottery:{book_id:null,book_name:null,book_num:1,title:null,rewards_title:null,credits_need:0,start_time:0,end_time:0,introduction:""},bookPickerDialogVisible:!1,rules:{book_name:[{validator:t,trigger:"blur"}],book_num:[{validator:i,trigger:"blur"}],credits_need:[{validator:a,trigger:"blur"}],title:[{validator:n,trigger:"blur"}],rewards_title:[{validator:n,trigger:"blur"}],start_time:[{validator:function(t,i,a){null===i||0===i?a(new Error("请选择起始日期")):(0!==e.newLottery.end_time&&e.$refs.newLottery.validateField("end_time"),a())},trigger:"blur"}],end_time:[{validator:function(t,i,a){null===i||0===i?a(new Error("请选择结束日期")):i<e.newLottery.start_time?a(new Error("结束时间不应比起始时间早")):a()},trigger:"blur"}],introduction:[{validator:r,trigger:"blur"}]}}},watch:{visiable:function(e){this.show=e,!0===e&&(this.newLottery.start_time=24*parseInt((new Date).getTime()/1e3/60/60/24)*60*60*1e3,this.newLottery.end_time=this.newLottery.start_time+6048e5)}},methods:{handleDialogClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(i){e(),t.giveUpAdd()}).catch(function(e){})},giveUpAdd:function(){this.$emit("hide"),this.$refs.newLottery.resetFields(),this.newLottery={book_id:null,book_name:null,book_num:1,title:null,rewards_title:null,credits_need:0,start_time:0,end_time:0,introduction:""}},submitAdd:function(){var e=this;this.$refs.newLottery.validate(function(t){t&&e.$confirm("这些信息以后将无法修改，确认已完成编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.postLottery(e.newLottery)}).catch(function(){})})},postLottery:function(e){var t=this;e.start_time/=1e3,e.end_time/=1e3;for(var i in e)console.log(e[i]);this.$http.post(this.$store.state.host+"/adminpannel/lottery",e,{emulateJSON:!0}).then(function(i){t.util.sessionCheck(t,i.body.code)&&200===i.body.code?(t.$message.success("添加成功!"),t.giveUpAdd(),t.$emit("refreshPage")):(e.start_time*=1e3,e.end_time*=1e3,t.util.returnFailHandler())},function(i){e.start_time*=1e3,e.end_time*=1e3,t.util.returnFailHandler()})}}}},298:function(e,t,i){"use strict";var a=i(234);t.a={data:function(){return{info:{creditsdaily:1,creditsweekly:50},daily:1,weekly:50,isEditing:!1,swaps:[],dialogFormVisible:!1,activityDialogVisible:!1,imageDialogVisible:!1,newActivity:{},newImage:{},activities:[],activitiesPage:1,images:[],imagesPage:1}},components:{ImgUploader:a.a},mounted:function(){this.refreshCheckinEditor(),this.refreshSwapsEditor()},methods:{refreshCheckinEditor:function(){this.$store.commit("setLoadingStatus",!0),this.getInfo(),this.$store.commit("setLoadingStatus",!1)},creditsCheck:function(){var e=this.util.toValidNumber(this.info.creditsdaily,!1,!0);switch(e){case"error":return this.$message.error("请输入合法的非负数"),!1;case"empty":return this.$message.error("还没有输入"),!1}this.info.creditsdaily=e;var e=this.util.toValidNumber(this.info.creditsweekly,!1,!0);switch(e){case"error":return this.$message.error("请输入合法的非负数"),!1;case"empty":return this.$message.error("还没有输入"),!1}return this.info.creditsweekly=e,!0},editInfo:function(){this.daily=this.info.creditsdaily,this.weekly=this.info.creditsweekly,this.isEditing=!0,this.$store.commit("setEditStatus",!0)},saveEdit:function(){this.creditsCheck()&&(this.$store.commit("setLoadingStatus",!0),this.postChange(),this.$store.commit("setLoadingStatus",!1))},giveUpEdit:function(){this.info.creditsdaily=this.daily,this.info.creditsweekly=this.weekly,this.endEdit(),this.$message.info("已放弃修改")},endEdit:function(){this.$store.commit("setEditStatus",!1),this.isEditing=!1,this.daily=1,this.weekly=50},getInfo:function(){var e=this;this.$http.get(this.$store.state.host+"/Config/creditsdaily",{emulateJSON:!0}).then(function(t){var i=t.body.code;if(e.util.sessionCheck(e,i))switch(i){case 200:e.info.creditsdaily=t.body.info;break;default:e.util.returnFailHandler(t)}},this.util.returnFailHandler),this.$http.get(this.$store.state.host+"/Config/creditsweekly",{emulateJSON:!0}).then(function(t){var i=t.body.code;if(e.util.sessionCheck(e,i))switch(i){case 200:e.info.creditsweekly=t.body.info;break;default:e.util.returnFailHandler(t)}},this.util.returnFailHandler)},postChange:function(){var e=this;this.$http.post(this.$store.state.host+"/Config",{name:"creditsdaily",value:this.info.creditsdaily},{emulateJSON:!0}).then(function(t){var i=t.body.code;if(e.util.sessionCheck(e,i))switch(i){case 411:e.$message.error("信息不全");break;case 421:e.$message.error("不允许修改");break;case 200:e.$message.success("修改成功"),e.endEdit();break;default:e.util.returnFailHandler(t)}},this.util.returnFailHandler),this.$http.post(this.$store.state.host+"/Config",{name:"creditsweekly",value:this.info.creditsweekly},{emulateJSON:!0}).then(function(t){var i=t.body.code;if(e.util.sessionCheck(e,i))switch(i){case 411:e.$message.error("信息不全");break;case 421:e.$message.error("不允许修改");break;case 200:e.$message.success("修改成功"),e.endEdit();break;default:e.util.returnFailHandler(t)}},this.util.returnFailHandler)},refreshSwapsEditor:function(){this.getSwaps()},handleDialogClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(i){e(),t.dialogFormVisible=!1}).catch(function(e){})},showActivities:function(){this.activities=[],this.activitiesPage=1,this.activityDialogVisible=!0,this.getActivitiesByPage(this.activitiesPage)},modifiedActivity:function(e){switch(e.id=this.util.toValidNumber(e.id),e.type=this.util.toValidNumber(e.type),e.type){case 1:break;case 2:e.introduction=e.brief;break;default:e.title=e.bargain_title,e.introduction="砍价：《"+e.book_title+"》"}return e},getActivitiesByPage:function(e){var t=this;this.$http.get(this.$store.state.host+"/Activities/Going/"+e,{emulateJSON:!0}).then(function(e){t.util.sessionCheck(t,e.body.code)&&200===e.body.code?(t.activities=e.body.info,t.activities.forEach(function(e){e=t.modifiedActivity(e)})):t.$message.error("未知错误，请联系维护人员")},this.util.returnFailHandler)},selectActivity:function(e){this.newActivity=e,this.activityDialogVisible=!1},showImages:function(){this.images=[],this.imagesPage=1,this.imageDialogVisible=!0,this.getImagesByPage(this.imagesPage)},modifiedImage:function(e){return e.id=this.util.toValidNumber(e.id),e.name=e.url.substring(e.url.lastIndexOf("/")+1,e.url.length),e},getImagesByPage:function(e){var t=this;this.$http.get(this.$store.state.host+"/adminpannel/images/page/"+e,{emulateJSON:!0}).then(function(e){t.util.sessionCheck(t,e.body.code)&&200===e.body.code?(t.images=e.body.info,t.images.forEach(function(e){e=t.modifiedImage(e)})):t.$message.error("未知错误，请联系维护人员")},this.util.returnFailHandler)},selectImage:function(e){this.newImage=e,this.imageDialogVisible=!1},getSwaps:function(){var e=this;this.$http.get(this.$store.state.host+"/adminpannel/swaps",{emulateJSON:!0}).then(function(t){e.util.sessionCheck(e,t.body.code)&&200===t.body.code?e.swaps=t.body.info:e.$message.error("未知错误，请联系维护人员")},this.util.returnFailHandler)},addSwap:function(){this.newActivity.title="",this.newImage.name="",this.dialogFormVisible=!0},uploadSwap:function(){var e=this;this.newActivity.hasOwnProperty("id")&&this.newImage.hasOwnProperty("id")?this.$http.put(this.$store.state.host+"/adminpannel/swaps/"+this.newActivity.id+"/"+this.newImage.id,null,{emulateJSON:!0}).then(function(t){e.util.sessionCheck(e,t.body.code)&&200===t.body.code?(e.refreshSwapsEditor(),e.dialogFormVisible=!1):e.$message.error("未知错误，请联系维护人员")},this.util.returnFailHandler):this.$message.error("请选择待添加轮播图的对应活动和图片！")},deleteSwap:function(e){var t=this;this.$http.delete(this.$store.state.host+"/adminpannel/swaps/"+e.activity_id,{emulateJSON:!0}).then(function(e){t.util.sessionCheck(t,e.body.code)&&200===e.body.code?t.refreshSwapsEditor():t.$message.error("未知错误，请联系维护人员")},this.util.returnFailHandler)}}}},468:function(e,t,i){var a=i(469);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("79040acb",a,!0,{})},469:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".el-tabs[data-v-450eb2ae]{margin:10px 20px}",""])},470:function(e,t,i){"use strict";function a(e){i(471)}var n=i(291),r=i(480),o=i(70),s=a,l=o(n.a,r.a,!1,s,"data-v-6778bece",null);t.a=l.exports},471:function(e,t,i){var a=i(472);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("4a305808",a,!0,{})},472:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".container[data-v-6778bece]{background-color:#aaccffaa;padding:20px}.table-wrapper[data-v-6778bece]{background-color:#e0ffff;padding:10px;min-width:600px;width:auto}.fliter-wrapper[data-v-6778bece]{background-color:#fff;border-radius:4px;min-height:40px;padding:15px 20px;margin:10px 0}.inline-tools[data-v-6778bece]{position:relative;padding-left:180px}.upper-tools[data-v-6778bece]{margin-bottom:20px;padding-top:auto}.tools-unit[data-v-6778bece]{text-align:center;margin-right:10px}.bottom-pagination[data-v-6778bece]{margin-top:20px;text-align:center}.short[data-v-6778bece]{background-color:#ffb6c1;color:red}.table-expand[data-v-6778bece]{font-size:0}.table-expand label[data-v-6778bece]{width:90px;color:#99a9bf}.table-expand .el-form-item[data-v-6778bece]{margin-right:0;margin-bottom:0;width:60%;padding-left:80px;text-align:left}.book-brief[data-v-6778bece]{font-size:13px;color:#999}",""])},473:function(e,t,i){"use strict";function a(e){i(474)}var n=i(292),r=i(479),o=i(70),s=a,l=o(n.a,r.a,!1,s,"data-v-9afb7fec",null);t.a=l.exports},474:function(e,t,i){var a=i(475);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("77f34eec",a,!0,{})},475:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".image-wrapper[data-v-9afb7fec]{width:300px;height:300px}.book-name[data-v-9afb7fec]{margin-top:10px;word-break:break-all;font-size:20px}",""])},476:function(e,t,i){var a=i(477);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("505a10e6",a,!0,{})},477:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".el-dialog__body[data-v-e298fd94]{padding-top:10px}.no-book-info[data-v-e298fd94]{text-align:center;font-size:30px;padding-top:200px}.card-wrapper[data-v-e298fd94]{position:relative}div.card-wrapper[data-v-e298fd94]:hover{box-shadow:0 0 16px #ffc400aa;transition:all .1s ease-in}div.selected-mask[data-v-e298fd94]{position:absolute;top:0;left:0;width:126px;height:132px;padding-top:60px;color:#f0f8ff;background-color:#00000088;box-shadow:0 0 16px #0066ffaf;transition:all .1s ease-in;text-align:center}.book-list[data-v-e298fd94]{height:660px}.book-name[data-v-e298fd94]{font-size:14px;line-height:14px;height:42px;word-break:break-all}.book-author[data-v-e298fd94]{color:#999;font-size:10px;margin-bottom:4px}.selected-book[data-v-e298fd94]{float:left;margin-left:20px}.bottom-pagination[data-v-e298fd94]{text-align:center}.search-area[data-v-e298fd94]{width:60%;text-align:center;margin:0 10px;margin-bottom:20px}",""])},478:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{width:"800px",top:"2vh",size:"mini",visible:e.show,"before-close":e.handleDialogClose,"modal-append-to-body":!1},on:{"update:visible":function(t){e.show=t}}},[i("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[i("div",[e._v("\n            选择一本书\n        ")])]),e._v(" "),i("div",{staticClass:"search-area"},[i("el-input",{attrs:{maxlength:"10",placeholder:"输入书籍名称或作者进行检索"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[i("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-search"},nativeOn:{click:function(t){return e.searchBook(t)}},slot:"append"})],1)],1),e._v(" "),i("div",{staticClass:"book-list"},[i("el-row",[0===e.books.length?i("el-col",[i("div",{staticClass:"no-book-info"},[e._v("\n                    还没有书哦:(\n                ")])]):e._e(),e._v(" "),e._l(e.books,function(t){return i("el-col",{key:t.id,staticStyle:{margin:"10px"},attrs:{span:4},nativeOn:{click:function(i){e.selectBook(t)}}},[i("div",{staticClass:"card-wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.selected.id===t.id,expression:"selected.id === book.id"}],staticClass:"selected-mask"},[i("i",{staticClass:"el-icon-check",attrs:{type:"primary"}},[e._v("已选择")])]),e._v(" "),i("el-card",{attrs:{"body-style":{padding:"0px"}}},[i("img",{staticStyle:{margin:"0 2px"},attrs:{width:"120",height:"120",src:t.cover}}),e._v(" "),i("div",{staticStyle:{padding:"2px 10px"}},[i("div",{staticClass:"book-author"},[e._v(e._s(t.author))]),e._v(" "),i("div",{staticClass:"book-name"},[e._v(e._s(t.name))])])])],1)])})],2)],1),e._v(" "),i("div",{staticClass:"bottom-pagination"},[i("el-pagination",{attrs:{"current-page":e.page,"page-size":15,layout:"total, prev, pager, next",total:e.amount},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.page=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("span",{staticClass:"selected-book"},[e._v("\n            已选定:\n            "),i("span",[i("el-input",{staticStyle:{width:"80px"},attrs:{readonly:!0,placeholder:"id"},model:{value:e.selected.id,callback:function(t){e.$set(e.selected,"id",t)},expression:"selected.id"}})],1),e._v(" "),i("span",[i("el-input",{staticStyle:{width:"250px"},attrs:{readonly:!0,placeholder:"书籍名称"},model:{value:e.selected.name,callback:function(t){e.$set(e.selected,"name",t)},expression:"selected.name"}})],1),e._v(" "),i("span",[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0,placeholder:"作者"},model:{value:e.selected.author,callback:function(t){e.$set(e.selected,"author",t)},expression:"selected.author"}})],1)]),e._v(" "),i("span",[i("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:""},on:{click:function(t){e.handleDialogClose(function(){})}}}),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-check",disabled:null===e.selected.id,circle:""},on:{click:e.submitAdd}})],1)])])},n=[],r={render:a,staticRenderFns:n};t.a=r},479:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"book-picker-wrapper"},[i("book-picker",{directives:[{name:"show",rawName:"v-show",value:e.showBookPicker,expression:"showBookPicker"}],attrs:{visiable:e.showBookPicker,"selected-book":e.selectedBook},on:{hide:e.giveUpPick,selectBook:e.selectBook}})],1),e._v(" "),i("el-dialog",{attrs:{width:"800px",top:"2vh",size:"mini",title:"新的砍价",visible:e.show,"before-close":e.handleDialogClose,"modal-append-to-body":!1},on:{"update:visible":function(t){e.show=t}}},[i("el-form",{ref:"newBargain",attrs:{rules:e.rules,model:e.newBargain,"label-width":"200px","label-position":"right","status-icon":""}},[i("el-form-item",{attrs:{label:"活动书籍id",prop:"book_id"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.newBargain.book_id,callback:function(t){e.$set(e.newBargain,"book_id",t)},expression:"newBargain.book_id"}}),e._v(" "),i("el-button",{attrs:{icon:"el-icon-edit",type:"primary",circle:""},on:{click:e.beginPick}}),e._v(" "),null!==e.newBargain.book_id?i("el-popover",{attrs:{placement:"right-start",width:"300",trigger:"hover"}},[i("div",{staticClass:"image-wrapper"},[i("img",{attrs:{src:e.selectedBook.cover,width:"300px",height:"300px"}})]),e._v(" "),i("div",{staticStyle:{}},[e._v("\n                        "+e._s(e.selectedBook.name)+"\n                    ")]),e._v(" "),i("el-button",{attrs:{slot:"reference",type:"info",icon:"el-icon-search",circle:""},slot:"reference"})],1):e._e()],1),e._v(" "),i("el-form-item",{attrs:{label:"活动名称",prop:"title"}},[i("el-input",{model:{value:e.newBargain.title,callback:function(t){e.$set(e.newBargain,"title",t)},expression:"newBargain.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"书籍数目",prop:"amount"}},[i("el-input",{model:{value:e.newBargain.amount,callback:function(t){e.$set(e.newBargain,"amount",t)},expression:"newBargain.amount"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"起价",prop:"price"}},[i("el-input",{model:{value:e.newBargain.price,callback:function(t){e.$set(e.newBargain,"price",t)},expression:"newBargain.price"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"最大砍价次数",prop:"times"}},[i("el-input",{model:{value:e.newBargain.times,callback:function(t){e.$set(e.newBargain,"times",t)},expression:"newBargain.times"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"砍价类型",prop:"type"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#cc00aa","inactive-color":"#ffaa00","active-text":"线性型","inactive-text":"指数型"},on:{change:e.validateType},model:{value:e.newBargain.type,callback:function(t){e.$set(e.newBargain,"type",t)},expression:"newBargain.type"}}),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[i("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                        指数型砍价，每次砍掉的价格取决于当前价格，期望值会随着砍价次数增多而减少；"),i("br"),e._v("\n                        线性型砍价，每次砍掉的价格取决于书本原价，期望值是固定值\n                    ")]),e._v(" "),i("el-button",{attrs:{type:"info",circle:""}},[e._v("??")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"单次砍价区间（百分比）"}},[i("el-row",[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"min"}},[i("el-input",{staticStyle:{width:"100px"},model:{value:e.newBargain.min,callback:function(t){e.$set(e.newBargain,"min",t)},expression:"newBargain.min"}})],1)],1),e._v(" "),i("el-col",{staticClass:"line",attrs:{span:2}},[e._v("~")]),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"max",required:""}},[i("el-input",{staticStyle:{width:"100px"},model:{value:e.newBargain.max,callback:function(t){e.$set(e.newBargain,"max",t)},expression:"newBargain.max"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-top":"1em"}},[i("el-col",{attrs:{span:24}},[i("span",[e._v("砍价结束时价格区间：")]),e._v(" "),i("span",[e._v(e._s(e.minAndMax))])])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"起始时间",prop:"start_time"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择起始日期时间",clearable:!1,editable:!1},model:{value:e.st,callback:function(t){e.st=t},expression:"st"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束时间",prop:"end_time"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束日期时间",clearable:!1,editable:!1},model:{value:e.ed,callback:function(t){e.ed=t},expression:"ed"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"活动简介",prop:"introduction"}},[i("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"在此输入活动描述"},model:{value:e.newBargain.introduction,callback:function(t){e.$set(e.newBargain,"introduction",t)},expression:"newBargain.introduction"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.handleDialogClose(function(){})}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.submitAdd}},[e._v("确 定")])],1)],1)],1)},n=[],r={render:a,staticRenderFns:n};t.a=r},480:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"upper-tools"},[i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"success",icon:"el-icon-refresh",circle:""},nativeOn:{click:function(t){return e.refreshPage(t)}}})],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},nativeOn:{click:function(t){return e.addBargain(t)}}})],1),e._v(" "),i("span",{staticStyle:{width:"40%"}})]),e._v(" "),i("div",{staticClass:"fliter-wrapper"},[i("span",[e._v("活动状态：")]),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"warning",icon:"el-icon-search"},nativeOn:{click:function(t){e.handleFliterChange(0)}}},[e._v("未开始")])],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"success",icon:"el-icon-search"},nativeOn:{click:function(t){e.handleFliterChange(1)}}},[e._v("进行中")])],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"info",icon:"el-icon-search"},nativeOn:{click:function(t){e.handleFliterChange(2)}}},[e._v("已结束")])],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"danger",icon:"el-icon-search"},nativeOn:{click:function(t){e.handleFliterChange(-1)}}},[e._v("不合法")])],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-close"},nativeOn:{click:function(t){e.handleFliterChange(-2)}}},[e._v("取消筛选")])],1)]),e._v(" "),i("div",{staticClass:"new-bargain-form-wrapper"},[i("new-bargain-dialog",{directives:[{name:"show",rawName:"v-show",value:e.showNewBargainForm,expression:"showNewBargainForm"}],attrs:{visiable:e.showNewBargainForm},on:{hide:e.givpUpAdd,refreshPage:e.refreshPage}})],1),e._v(" "),i("div",{staticClass:"table-wrapper"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bargains,border:"",stripe:"","tooltip-effect":"dark","max-height":"600"}},[i("el-table-column",{attrs:{label:"活动标题",prop:"bargain_title","header-align":"center",align:"center",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{label:"书籍",width:"60","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{attrs:{placement:"top-end",width:"300",trigger:"hover"}},[i("div",{staticClass:"book-info-wrapper"},[i("el-card",{attrs:{"body-style":{padding:"0px"}}},[i("img",{attrs:{src:t.row.cover,width:"300",height:"300"}}),e._v(" "),i("div",{staticStyle:{padding:"14px"}},[i("span",[e._v(e._s(t.row.book_title))]),e._v(" "),i("div",{staticClass:"bottom clearfix"},[i("span",{staticClass:"book-brief"},[e._v("\n                                            "+e._s(t.row.brief)+"\n                                        ")])])])])],1),e._v(" "),i("el-button",{attrs:{slot:"reference",icon:"el-icon-search",circle:""},slot:"reference"})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"起价",prop:"original_price","header-align":"center",align:"center",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{label:"当前价格",prop:"current_price","header-align":"center",align:"center",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{label:"剩余图书",prop:"books_left","header-align":"center",align:"center",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{label:"剩余次数",prop:"times_left","header-align":"center",align:"center",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{label:"参与人数",prop:"users_count","header-align":"center",align:"center",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"state",width:"80","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:0===t.row.state?"warning":1===t.row.state?"success":2===t.row.state?"info":"error"}},[e._v("\n                        "+e._s(t.row.stateName)+"\n                    ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"开始时间",prop:"start_time","header-align":"center",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择起始日期时间",disabled:0!==t.row.state||!t.row.isEditing,clearable:!1,editable:!1,"prefix-icon":0===t.row.state&&t.row.isEditing?"el-icon-edit":"el-icon-date"},model:{value:t.row.start_time,callback:function(i){e.$set(t.row,"start_time",i)},expression:"scope.row.start_time"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"结束时间",prop:"end_time","header-align":"center",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择结束日期时间",disabled:!t.row.isEditing,clearable:!1,editable:!1,"prefix-icon":t.row.isEditing?"el-icon-edit":"el-icon-date"},model:{value:t.row.end_time,callback:function(i){e.$set(t.row,"end_time",i)},expression:"scope.row.end_time"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"活动描述",prop:"introduction","header-align":"center",align:"left","min-width":"200"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作","header-align":"center",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[t.row.isEditing?e._e():i("span",[i("el-button",{attrs:{type:"warning",icon:"el-icon-edit",circle:""},nativeOn:{click:function(i){e.editBargain(t.row)}}})],1),e._v(" "),t.row.isEditing?e._e():i("span",[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},nativeOn:{click:function(i){e.deleteBargain(t.row)}}})],1),e._v(" "),t.row.isEditing?i("span",[i("el-button",{attrs:{type:"primary",icon:"el-icon-check",circle:""},nativeOn:{click:function(i){e.saveBargain(t.row)}}})],1):e._e(),e._v(" "),t.row.isEditing?i("span",[i("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:""},nativeOn:{click:function(i){e.recoverBargain(t.row)}}})],1):e._e()])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"bottom-pagination"},[i("el-pagination",{attrs:{fixed:"",background:"","current-page":e.pageNo,"page-size":e.pageSize,"page-sizes":[10,15,20],layout:"total, sizes, prev, pager, next, jumper",total:e.bargainAmount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNo=t}}})],1)])},n=[],r={render:a,staticRenderFns:n};t.a=r},481:function(e,t,i){"use strict";function a(e){i(482)}var n=i(294),r=i(488),o=i(70),s=a,l=o(n.a,r.a,!1,s,"data-v-6d7ac94d",null);t.a=l.exports},482:function(e,t,i){var a=i(483);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("1aac5f42",a,!0,{})},483:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".container[data-v-6d7ac94d]{background-color:#aaccffaa;padding:20px}.table-wrapper[data-v-6d7ac94d]{background-color:#e0ffff;padding:10px;min-width:600px;width:auto}.fliter-wrapper[data-v-6d7ac94d]{background-color:#fff;border-radius:4px;min-height:40px;padding:15px 20px;margin:10px 0}.inline-tools[data-v-6d7ac94d]{position:relative;padding-left:180px}.upper-tools[data-v-6d7ac94d]{margin-bottom:20px;padding-top:auto}.tools-unit[data-v-6d7ac94d]{text-align:center;margin-right:10px}.bottom-pagination[data-v-6d7ac94d]{margin-top:20px;text-align:center}.short[data-v-6d7ac94d]{background-color:#ffb6c1;color:red}.table-expand[data-v-6d7ac94d]{font-size:0}.table-expand label[data-v-6d7ac94d]{width:90px;color:#99a9bf}.table-expand .el-form-item[data-v-6d7ac94d]{margin-right:0;margin-bottom:0;width:60%;padding-left:80px;text-align:left}.book-brief[data-v-6d7ac94d]{font-size:13px;color:#999}.bg-grey[data-v-6d7ac94d]{background:#ececec}.grid-content[data-v-6d7ac94d]{border-radius:4px;min-height:40px;padding:5px 20px;margin:10px 0}",""])},484:function(e,t,i){"use strict";function a(e){i(485)}var n=i(295),r=i(487),o=i(70),s=a,l=o(n.a,r.a,!1,s,"data-v-eef1a8d4",null);t.a=l.exports},485:function(e,t,i){var a=i(486);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("67cf9475",a,!0,{})},486:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,"",""])},487:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{width:"800px",size:"mini",title:"新的轮盘",visible:e.show,"modal-append-to-body":!1},on:{"update:visible":function(t){e.show=t}}},[i("el-form",{ref:"newRound",attrs:{rules:e.rules,model:e.newRound,"label-width":"200px","label-position":"right","status-icon":""}},[i("el-form-item",{attrs:{label:"轮盘活动标题",prop:"title"}},[i("el-input",{model:{value:e.newRound.title,callback:function(t){e.$set(e.newRound,"title",t)},expression:"newRound.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"每次消耗积分",prop:"cost"}},[i("el-input",{model:{value:e.newRound.cost,callback:function(t){e.$set(e.newRound,"cost",t)},expression:"newRound.cost"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"最多抽奖次数",prop:"times"}},[i("el-input",{model:{value:e.newRound.times,callback:function(t){e.$set(e.newRound,"times",t)},expression:"newRound.times"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"起始时间",prop:"start_time"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择起始日期时间",clearable:!1,editable:!1},model:{value:e.newRound.start_time,callback:function(t){e.$set(e.newRound,"start_time",t)},expression:"newRound.start_time"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束时间",prop:"end_time"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束日期时间",clearable:!1,editable:!1},model:{value:e.newRound.end_time,callback:function(t){e.$set(e.newRound,"end_time",t)},expression:"newRound.end_time"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"活动简要介绍",prop:"brief"}},[i("el-input",{attrs:{type:"textarea","min-height":"",autosize:{minRows:2},placeholder:"在此输入轮盘活动描述"},model:{value:e.newRound.brief,callback:function(t){e.$set(e.newRound,"brief",t)},expression:"newRound.brief"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"活动详细介绍",prop:"details"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:3},placeholder:"在此输入轮盘活动描述"},model:{value:e.newRound.details,callback:function(t){e.$set(e.newRound,"details",t)},expression:"newRound.details"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.handleDialogClose(function(){})}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.submitAdd}},[e._v("确 定")])],1)],1)},n=[],r={render:a,staticRenderFns:n};t.a=r},488:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("book-picker",{directives:[{name:"show",rawName:"v-show",value:e.bookPickerDialogVisible,expression:"bookPickerDialogVisible"}],attrs:{visiable:e.bookPickerDialogVisible},on:{selectBook:e.handleBookPicker,hide:function(t){e.bookPickerDialogVisible=!1}}}),e._v(" "),i("el-dialog",{attrs:{width:"800px",size:"mini",title:"新的奖品",visible:e.newRewardDialogVisible,"before-close":e.handleDialogClose,"modal-append-to-body":!1},on:{"update:visible":function(t){e.newRewardDialogVisible=t}}},[i("el-form",{ref:"rewardForm",attrs:{model:e.newReward,rules:e.rules,size:"small","label-width":"200px","label-position":"right","status-icon":""}},[i("el-form-item",{attrs:{label:"奖品名称：",prop:"title"}},[i("el-input",{attrs:{placeholder:"奖品名称"},model:{value:e.newReward.title,callback:function(t){e.$set(e.newReward,"title",t)},expression:"newReward.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"奖品类别：",prop:"category"}},[i("el-select",{attrs:{placeholder:"奖品类别"},model:{value:e.newReward.category,callback:function(t){e.$set(e.newReward,"category",t)},expression:"newReward.category"}},e._l(e.rewardType,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"中奖权重：",prop:"percent"}},[i("el-input",{attrs:{placeholder:"中奖率"},model:{value:e.newReward.percent,callback:function(t){e.$set(e.newReward,"percent",t)},expression:"newReward.percent"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"奖品总数：",prop:"amount"}},[i("el-input",{attrs:{placeholder:"奖品总数"},model:{value:e.newReward.amount,callback:function(t){e.$set(e.newReward,"amount",t)},expression:"newReward.amount"}})],1),e._v(" "),0===e.newReward.category?i("el-form-item",{attrs:{prop:"name",label:"书籍名称："}},[i("el-input",{staticClass:"input-with-select",attrs:{disabled:"",placeholder:"书籍名称"},model:{value:e.newReward.name,callback:function(t){e.$set(e.newReward,"name",t)},expression:"newReward.name"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-edit"},on:{click:function(t){e.bookPickerDialogVisible=!0}},slot:"append"})],1)],1):1===e.newReward.category?i("el-form-item",{attrs:{prop:"text",label:"兑换码："}},[i("el-input",{attrs:{placeholder:"优惠券兑换码"},model:{value:e.newReward.text,callback:function(t){e.$set(e.newReward,"text",t)},expression:"newReward.text"}})],1):2===e.newReward.category?i("el-form-item",{attrs:{prop:"credit",label:"积分数量："}},[i("el-input",{attrs:{placeholder:"积分数量"},model:{value:e.newReward.credit,callback:function(t){e.$set(e.newReward,"credit",t)},expression:"newReward.credit"}})],1):i("el-form-item",{attrs:{label:"提示信息："}},[i("el-input",{attrs:{placeholder:"用户中奖后看到的信息"},model:{value:e.newReward.text,callback:function(t){e.$set(e.newReward,"text",t)},expression:"newReward.text"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.handleDialogClose(function(){})}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.saveReward}},[e._v("确 定")])],1)],1),e._v(" "),i("div",{staticClass:"upper-tools"},[i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"success",icon:"el-icon-refresh",circle:""},nativeOn:{click:function(t){return e.refreshPage(t)}}})],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},nativeOn:{click:function(t){return e.addRound(t)}}})],1),e._v(" "),i("span",{staticStyle:{width:"40%"}})]),e._v(" "),i("div",{staticClass:"fliter-wrapper"},[i("span",[e._v("活动状态：")]),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"warning",icon:"el-icon-search"},nativeOn:{click:function(t){e.handleFliterChange(0)}}},[e._v("未开始")])],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"success",icon:"el-icon-search"},nativeOn:{click:function(t){e.handleFliterChange(1)}}},[e._v("进行中")])],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"info",icon:"el-icon-search"},nativeOn:{click:function(t){e.handleFliterChange(2)}}},[e._v("已结束")])],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"danger",icon:"el-icon-search"},nativeOn:{click:function(t){e.handleFliterChange(-1)}}},[e._v("不合法")])],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-close"},nativeOn:{click:function(t){e.handleFliterChange(-2)}}},[e._v("取消筛选")])],1)]),e._v(" "),i("div",{staticClass:"new-round-form-wrapper"},[i("new-round-dialog",{directives:[{name:"show",rawName:"v-show",value:e.showNewRoundForm,expression:"showNewRoundForm"}],attrs:{visiable:e.showNewRoundForm},on:{hide:e.giveUpRoundAdd,refreshPage:e.refreshPage}})],1),e._v(" "),i("div",{staticClass:"table-wrapper"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rounds,border:"",stripe:"","tooltip-effect":"dark","max-height":"600"}},[i("el-table-column",{attrs:{label:"更多操作",type:"expand",width:"100",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"grid-content bg-grey"},[i("div",{staticStyle:{padding:"10px 0"}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{staticStyle:{padding:"1em","font-size":"x-large"},attrs:{span:22,offset:2}},[e._v("奖品信息：")])],1)],1),e._v(" "),e._l(t.row.rewards,function(a){return i("el-row",{key:a.id},[i("el-col",{attrs:{span:22,offset:2}},[i("el-form",{ref:"rewardsForm",refInFor:!0,staticClass:"demo-form-inline",attrs:{inline:!0,model:a,rules:e.rules,size:"small"}},[i("el-form-item",{attrs:{label:"奖品名称：",prop:"title"}},[i("el-input",{attrs:{disabled:"",placeholder:"奖品名称"},model:{value:a.title,callback:function(t){e.$set(a,"title",t)},expression:"reward.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"奖品类别：",prop:"category"}},[i("el-select",{staticStyle:{width:"120px"},attrs:{disabled:"",placeholder:"奖品类别"},model:{value:a.category,callback:function(t){e.$set(a,"category",t)},expression:"reward.category"}},e._l(e.rewardType,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"中奖权重：",prop:"percent"}},[i("el-input",{staticStyle:{width:"60px"},attrs:{disabled:"",placeholder:"中奖率"},model:{value:a.percent,callback:function(t){e.$set(a,"percent",t)},expression:"reward.percent"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"奖品总数：",prop:"amount"}},[i("el-input",{staticStyle:{width:"80px"},attrs:{disabled:"",placeholder:"奖品总数"},model:{value:a.amount,callback:function(t){e.$set(a,"amount",t)},expression:"reward.amount"}})],1),e._v(" "),0===a.category?i("el-form-item",{attrs:{"label-width":"100px",prop:"name",label:"书籍名称："}},[i("el-input",{attrs:{disabled:"",placeholder:"书籍名称"},model:{value:a.name,callback:function(t){e.$set(a,"name",t)},expression:"reward.name"}})],1):1===a.category?i("el-form-item",{attrs:{"label-width":"100px",prop:"text",label:"兑换码："}},[i("el-input",{attrs:{disabled:"",placeholder:"优惠券兑换码"},model:{value:a.text,callback:function(t){e.$set(a,"text",t)},expression:"reward.text"}})],1):2===a.category?i("el-form-item",{attrs:{"label-width":"100px",prop:"credit",label:"积分数量："}},[i("el-input",{attrs:{disabled:"",placeholder:"积分数量"},model:{value:a.credit,callback:function(t){e.$set(a,"credit",t)},expression:"reward.credit"}})],1):i("el-form-item",{attrs:{"label-width":"100px",label:"提示信息："}},[i("el-input",{attrs:{disabled:"",placeholder:"用户中奖后看到的信息"},model:{value:a.text,callback:function(t){e.$set(a,"text",t)},expression:"reward.text"}})],1),e._v(" "),i("el-form-item",[i("span",[i("el-button",{attrs:{type:"warning",icon:"el-icon-edit",circle:""},nativeOn:{click:function(i){e.editReward(a,t.row)}}}),e._v(" "),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},nativeOn:{click:function(t){e.deleteReward(a)}}})],1)])],1)],1)],1)}),e._v(" "),t.row.rewards.length<8?i("el-row",[i("el-col",{attrs:{span:22,offset:2}},[i("div",{staticStyle:{padding:"1em"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},nativeOn:{click:function(i){e.addNewReward(t.row)}}})],1)])],1):e._e()],2)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"活动标题",prop:"title","header-align":"center",align:"center",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{label:"消耗积分",prop:"cost",align:"center",width:"100","header-align":"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"可抽次数",prop:"times","header-align":"center",align:"center",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"state",width:"100",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:0===t.row.state?"warning":1===t.row.state?"success":2===t.row.state?"info":"error"}},[e._v("\n                        "+e._s(t.row.stateName)+"\n                    ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"开始时间",prop:"start_time","header-align":"center",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择起始日期时间",clearable:!1,editable:!1,"prefix-icon":t.row.isEditing?"el-icon-edit":"el-icon-date",disabled:!t.row.isEditing},model:{value:t.row.start_time,callback:function(i){e.$set(t.row,"start_time",i)},expression:"scope.row.start_time"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"结束时间",prop:"end_time","header-align":"center",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择结束日期时间",disabled:!t.row.isEditing,clearable:!1,editable:!1,"prefix-icon":t.row.isEditing?"el-icon-edit":"el-icon-date"},model:{value:t.row.end_time,callback:function(i){e.$set(t.row,"end_time",i)},expression:"scope.row.end_time"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"简要描述",prop:"brief","header-align":"center",align:"left","min-width":"200"}}),e._v(" "),i("el-table-column",{attrs:{label:"详细描述",prop:"details","header-align":"center",align:"left","min-width":"200"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditing?i("span",[i("el-button",{attrs:{type:"primary",icon:"el-icon-check",circle:""},nativeOn:{click:function(i){e.saveRound(t.row)}}}),e._v(" "),i("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:""},nativeOn:{click:function(i){e.recoverRound(t.row)}}})],1):i("span",[i("el-button",{attrs:{type:"warning",icon:"el-icon-edit",circle:""},nativeOn:{click:function(i){e.editRound(t.row)}}}),e._v(" "),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},nativeOn:{click:function(i){e.deleteRound(t.row)}}})],1)]}}])})],1)],1),e._v(" "),i("div",{staticClass:"bottom-pagination"},[i("el-pagination",{attrs:{fixed:"",background:"","current-page":e.pageNo,"page-size":e.pageSize,"page-sizes":[10,15,20],layout:"total, sizes, prev, pager, next, jumper",total:e.roundAmount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNo=t}}})],1)],1)},n=[],r={render:a,staticRenderFns:n};t.a=r},489:function(e,t,i){"use strict";function a(e){i(490)}var n=i(296),r=i(496),o=i(70),s=a,l=o(n.a,r.a,!1,s,"data-v-732bcbf4",null);t.a=l.exports},490:function(e,t,i){var a=i(491);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("36f13d1a",a,!0,{})},491:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".container[data-v-732bcbf4]{background-color:#aaccffaa;padding:20px}.table-wrapper[data-v-732bcbf4]{background-color:#e0ffff;padding:10px;min-width:600px;width:auto}.fliter-wrapper[data-v-732bcbf4]{background-color:#fff;border-radius:4px;min-height:40px;padding:15px 20px;margin:10px 0}.inline-tools[data-v-732bcbf4]{position:relative;padding-left:180px}.upper-tools[data-v-732bcbf4]{margin-bottom:20px;padding-top:auto}.tools-unit[data-v-732bcbf4]{text-align:center;margin-right:10px}.bottom-pagination[data-v-732bcbf4]{margin-top:20px;text-align:center}.short[data-v-732bcbf4]{background-color:#ffb6c1;color:red}.table-expand[data-v-732bcbf4]{font-size:0}.table-expand label[data-v-732bcbf4]{width:90px;color:#99a9bf}.table-expand .el-form-item[data-v-732bcbf4]{margin-right:0;margin-bottom:0;width:60%;padding-left:80px;text-align:left}.book-brief[data-v-732bcbf4]{font-size:13px;color:#999}",""])},492:function(e,t,i){"use strict";function a(e){i(493)}var n=i(297),r=i(495),o=i(70),s=a,l=o(n.a,r.a,!1,s,"data-v-f5d61170",null);t.a=l.exports},493:function(e,t,i){var a=i(494);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("5fc1b027",a,!0,{})},494:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,"",""])},495:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{width:"800px",size:"mini",title:"新的抽奖",visible:e.show,"before-close":e.handleDialogClose,"modal-append-to-body":!1},on:{"update:visible":function(t){e.show=t}}},[i("book-picker",{attrs:{visiable:e.bookPickerDialogVisible},on:{selectBook:function(t){e.newLottery.book_id=t.id,e.newLottery.book_name=t.name,e.bookPickerDialogVisible=!1},hide:function(t){e.bookPickerDialogVisible=!1}}}),e._v(" "),i("el-form",{ref:"newLottery",attrs:{rules:e.rules,model:e.newLottery,"label-width":"200px","label-position":"right","status-icon":""}},[i("el-form-item",{attrs:{label:"活动书籍",prop:"book_name"}},[i("el-input",{staticClass:"input-with-select",staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:e.newLottery.book_name,callback:function(t){e.$set(e.newLottery,"book_name",t)},expression:"newLottery.book_name"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-edit"},on:{click:function(t){e.bookPickerDialogVisible=!0}},slot:"append"})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"活动名称",prop:"title"}},[i("el-input",{model:{value:e.newLottery.title,callback:function(t){e.$set(e.newLottery,"title",t)},expression:"newLottery.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"奖品描述",prop:"title"}},[i("el-input",{model:{value:e.newLottery.rewards_title,callback:function(t){e.$set(e.newLottery,"rewards_title",t)},expression:"newLottery.rewards_title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"奖池书籍总量",prop:"book_num"}},[i("el-input",{model:{value:e.newLottery.book_num,callback:function(t){e.$set(e.newLottery,"book_num",t)},expression:"newLottery.book_num"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"抽奖消耗积分",prop:"credits_need"}},[i("el-input",{model:{value:e.newLottery.credits_need,callback:function(t){e.$set(e.newLottery,"credits_need",t)},expression:"newLottery.credits_need"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"起始时间",prop:"start_time"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择起始日期时间",clearable:!1,editable:!1},model:{value:e.newLottery.start_time,callback:function(t){e.$set(e.newLottery,"start_time",t)},expression:"newLottery.start_time"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束时间",prop:"end_time"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束日期时间",clearable:!1,editable:!1},model:{value:e.newLottery.end_time,callback:function(t){e.$set(e.newLottery,"end_time",t)},expression:"newLottery.end_time"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"活动简介",prop:"introduction"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:3},placeholder:"在此输入活动描述"},model:{value:e.newLottery.introduction,callback:function(t){e.$set(e.newLottery,"introduction",t)},expression:"newLottery.introduction"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.handleDialogClose(function(){})}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.submitAdd}},[e._v("确 定")])],1)],1)},n=[],r={render:a,staticRenderFns:n};t.a=r},496:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"upper-tools"},[i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"success",icon:"el-icon-refresh",circle:""},nativeOn:{click:function(t){return e.refreshPage(t)}}})],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},nativeOn:{click:function(t){return e.addLottery(t)}}})],1),e._v(" "),i("span",{staticStyle:{width:"40%"}})]),e._v(" "),i("div",{staticClass:"fliter-wrapper"},[i("span",[e._v("活动状态：")]),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"warning",icon:"el-icon-search"},nativeOn:{click:function(t){e.handleFliterChange(0)}}},[e._v("未开始")])],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"success",icon:"el-icon-search"},nativeOn:{click:function(t){e.handleFliterChange(1)}}},[e._v("进行中")])],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"info",icon:"el-icon-search"},nativeOn:{click:function(t){e.handleFliterChange(2)}}},[e._v("已结束")])],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"danger",icon:"el-icon-search"},nativeOn:{click:function(t){e.handleFliterChange(-1)}}},[e._v("不合法")])],1),e._v(" "),i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-close"},nativeOn:{click:function(t){e.handleFliterChange(-2)}}},[e._v("取消筛选")])],1)]),e._v(" "),i("div",{staticClass:"new-lottery-form-wrapper"},[i("new-lottery-dialog",{directives:[{name:"show",rawName:"v-show",value:e.showNewLotteryForm,expression:"showNewLotteryForm"}],attrs:{visiable:e.showNewLotteryForm},on:{hide:e.givpUpAdd,refreshPage:e.refreshPage}})],1),e._v(" "),i("div",{staticClass:"table-wrapper"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.lotteries,border:"",stripe:"","tooltip-effect":"dark","max-height":"600"}},[i("el-table-column",{attrs:{label:"活动标题",prop:"title","header-align":"center",align:"center","min-width":"180"}}),e._v(" "),i("el-table-column",{attrs:{label:"奖品描述",prop:"rewards_info.title","header-align":"center",align:"center","min-width":"180"}}),e._v(" "),i("el-table-column",{attrs:{label:"消耗积分",prop:"credits_need","header-align":"center",align:"center",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{label:"剩余数量",prop:"book_num","header-align":"center",align:"center",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"state",width:"100",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:0===t.row.state?"warning":1===t.row.state?"success":2===t.row.state?"info":"error"}},[e._v("\n                        "+e._s(t.row.stateName)+"\n                    ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"开始时间",prop:"start_time","header-align":"center",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择起始日期时间",disabled:!t.row.isEditing,clearable:!1,editable:!1,"prefix-icon":t.row.isEditing?"el-icon-edit":"el-icon-date"},model:{value:t.row.start_time,callback:function(i){e.$set(t.row,"start_time",i)},expression:"scope.row.start_time"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"结束时间",prop:"end_time","header-align":"center",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择结束日期时间",disabled:!t.row.isEditing,clearable:!1,editable:!1,"prefix-icon":t.row.isEditing?"el-icon-edit":"el-icon-date"},model:{value:t.row.end_time,callback:function(i){e.$set(t.row,"end_time",i)},expression:"scope.row.end_time"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"活动描述",prop:"introduction","min-width":"120","header-align":"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",prop:"introduction","header-align":"center",align:"center",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditing?e._e():i("span",[2!==t.row.state||t.row.open?[i("el-button",{attrs:{type:"warning",icon:"el-icon-edit",circle:""},nativeOn:{click:function(i){e.editLottery(t.row)}}}),e._v(" "),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},nativeOn:{click:function(i){e.deleteLottery(t.row)}}})]:[i("el-button",{attrs:{type:"primary",icon:"el-icon-check"},nativeOn:{click:function(i){e.checkLottery(t.row)}}},[e._v("开奖")])]],2),e._v(" "),t.row.isEditing?i("span",[i("el-button",{attrs:{type:"primary",icon:"el-icon-check",circle:""},nativeOn:{click:function(i){e.saveLottery(t.row)}}}),e._v(" "),i("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:""},nativeOn:{click:function(i){e.recoverLottery(t.row)}}})],1):e._e()]}}])})],1)],1),e._v(" "),i("div",{staticClass:"bottom-pagination"},[i("el-pagination",{attrs:{fixed:"",background:"","current-page":e.pageNo,"page-size":e.pageSize,"page-sizes":[10,15,20],layout:"total, sizes, prev, pager, next, jumper",total:e.lotteryAmount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNo=t}}})],1)])},n=[],r={render:a,staticRenderFns:n};t.a=r},497:function(e,t,i){"use strict";function a(e){i(498)}var n=i(298),r=i(500),o=i(70),s=a,l=o(n.a,r.a,!1,s,"data-v-ad4bbbb0",null);t.a=l.exports},498:function(e,t,i){var a=i(499);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("29c13ed6",a,!0,{})},499:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".container[data-v-ad4bbbb0]{padding:20px}.table-wrapper[data-v-ad4bbbb0]{background-color:#fff;padding:10px}.upper-tools[data-v-ad4bbbb0]{margin-bottom:20px;padding-top:auto}.tools-unit[data-v-ad4bbbb0]{text-align:center;vertical-align:middle;margin-right:10px}.el-carousel__item h3[data-v-ad4bbbb0]{color:#475669;font-size:14px;opacity:.75;line-height:200px;margin:0}.add-swap-div[data-v-ad4bbbb0]{position:absolute;top:calc(50% - 38px);left:calc(50% - 38px);overflow:hidden}.add-swap-div button[data-v-ad4bbbb0]{font-size:50px}.el-carousel__item[data-v-ad4bbbb0]:nth-child(2n){background-color:#99a9bf}.el-carousel__item[data-v-ad4bbbb0]:nth-child(odd){background-color:#d3dce6}.box-card[data-v-ad4bbbb0]{margin:20px}",""])},500:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("img-uploader",{ref:"uploader",attrs:{src:e.$store.state.host+"/adminpannel/image"}}),e._v(" "),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:16,offset:4}},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-size":"x-large"}},[e._v("签到积分编辑")]),e._v(" "),i("div",{staticClass:"upper-tools",staticStyle:{float:"right"}},[i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"success",icon:"el-icon-refresh",circle:""},nativeOn:{click:function(t){return e.refreshCheckinEditor(t)}}})],1),e._v(" "),e.isEditing?e._e():i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"warning",icon:"el-icon-edit",circle:""},nativeOn:{click:function(t){return e.editInfo(t)}}})],1),e._v(" "),e.isEditing?i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-check",circle:""},nativeOn:{click:function(t){return e.saveEdit(t)}}})],1):e._e(),e._v(" "),e.isEditing?i("span",{staticClass:"tools-unit"},[i("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:""},nativeOn:{click:function(t){return e.giveUpEdit(t)}}})],1):e._e()])]),e._v(" "),i("div",{staticClass:"table-wrapper"},[i("div",{staticStyle:{"margin-bottom":"1em"}},[i("span",{staticStyle:{"margin-right":"1em"}},[e._v("签到前6天所得积分：")]),e._v(" "),i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!e.isEditing,"suffix-icon":e.isEditing?"el-icon-edit":null,placeholder:"请输入积分数值"},model:{value:e.info.creditsdaily,callback:function(t){e.$set(e.info,"creditsdaily",t)},expression:"info.creditsdaily"}})],1),e._v(" "),i("div",[i("span",{staticStyle:{"margin-right":"1em"}},[e._v("签到第7天所得积分：")]),e._v(" "),i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!e.isEditing,"suffix-icon":e.isEditing?"el-icon-edit":null,placeholder:"请输入积分数值"},model:{value:e.info.creditsweekly,callback:function(t){e.$set(e.info,"creditsweekly",t)},expression:"info.creditsweekly"}})],1)])])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"添加轮播图",width:"70%",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-dialog",{attrs:{width:"60%",title:"选择活动",visible:e.activityDialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.activityDialogVisible=t}}},[i("el-table",{attrs:{data:e.activities}},[i("el-table-column",{attrs:{prop:"title",label:"活动标题","header-align":"center",align:"center",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"introduction",label:"活动详情","header-align":"center",align:"center",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{label:"选择","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[i("el-button",{attrs:{type:"warning",icon:"el-icon-check",circle:""},on:{click:function(i){e.selectActivity(t.row)}}})],1)]}}])})],1),e._v(" "),i("el-pagination",{attrs:{fixed:"",background:"","current-page":e.activitiesPage,"page-size":25,layout:"total, prev, pager, next, jumper"},on:{"current-change":function(t){e.getActivitiesByPage(e.activitiesPage)},"update:currentPage":function(t){e.activitiesPage=t}}})],1),e._v(" "),i("el-dialog",{attrs:{width:"60%",title:"选择图片",visible:e.imageDialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.imageDialogVisible=t}}},[i("el-table",{attrs:{data:e.images}},[i("el-table-column",{attrs:{prop:"name",label:"图片名","header-align":"center",align:"center",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"introduction",label:"图片预览","header-align":"center",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{width:"100%"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.row.url}})])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"选择","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[i("el-button",{attrs:{type:"warning",icon:"el-icon-check",circle:""},on:{click:function(i){e.selectImage(t.row)}}})],1)]}}])})],1),e._v(" "),i("el-pagination",{attrs:{fixed:"",background:"","current-page":e.imagesPage,"page-size":25,layout:"total, prev, pager, next, jumper"},on:{"current-change":function(t){e.getImagesByPage(e.imagesPage)},"update:currentPage":function(t){e.imagesPage=t}}})],1),e._v(" "),i("el-form",{attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"活动名称："}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请选择活动",disabled:!0},model:{value:e.newActivity.title,callback:function(t){e.$set(e.newActivity,"title",t)},expression:"newActivity.title"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-edit"},on:{click:e.showActivities},slot:"append"})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"封面图片："}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请选择图片",disabled:!0},model:{value:e.newImage.name,callback:function(t){e.$set(e.newImage,"name",t)},expression:"newImage.name"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-edit"},on:{click:e.showImages},slot:"append"})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.handleDialogClose(function(){})}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.uploadSwap}},[e._v("确 定")])],1)],1),e._v(" "),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:16,offset:4}},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-size":"x-large"}},[e._v("首页轮播图编辑")]),e._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"el-icon-upload2"},on:{click:function(t){e.$refs.uploader.open()}}},[e._v("上传图片")]),e._v(" "),i("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"success",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.refreshSwapsEditor(t)}}},[e._v(" 刷新 ")])],1),e._v(" "),i("el-carousel",{attrs:{autoplay:!1,interval:4e3,type:"card",height:"300px"}},[e._l(e.swaps,function(t){return i("el-carousel-item",{key:t.id},[i("div",{staticStyle:{position:"absolute",margin:"1em",right:"0"}},[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(i){e.deleteSwap(t)}}})],1),e._v(" "),i("div",{staticStyle:{width:"100%",height:"100%"}},[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.image.url}})])])}),e._v(" "),e.swaps.length<9?i("el-carousel-item",[i("div",{staticClass:"add-swap-div"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){e.addSwap()}}})],1)]):e._e()],2)],1)],1)],1)],1)},n=[],r={render:a,staticRenderFns:n};t.a=r},501:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"砍价",name:"first"}}),e._v(" "),i("el-tab-pane",{attrs:{label:"轮盘",name:"second"}}),e._v(" "),i("el-tab-pane",{attrs:{label:"抽奖",name:"third"}}),e._v(" "),i("el-tab-pane",{attrs:{label:"其它",name:"fourth"}})],1),e._v(" "),i("keep-alive",[i(e.currentTabComponent,{tag:"component"})],1)],1)},n=[],r={render:a,staticRenderFns:n};t.a=r}});