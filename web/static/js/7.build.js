webpackJsonp([7],{180:function(e,t,n){"use strict";function a(e){n(516)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(303),r=n(522),s=n(70),o=a,l=s(i.a,r.a,!1,o,"data-v-16de1d2a",null);t.default=l.exports},303:function(e,t,n){"use strict";var a=n(518);t.a={components:{AdminTable:a.a},mounted:function(){this.$store.commit("setLoadingStatus",!1)}}},304:function(e,t,n){"use strict";t.a={data:function(){var e=this;return{loading:!1,pageNo:1,pageSize:20,adminAmount:0,showRegisterForm:!1,newAdmin:{username:"",password:"",password2:""},admins:[],rules:{username:[{validator:function(e,t,n){""===t?n(new Error("请输入密码")):-1!==t.indexOf(" ")?n(new Error("不要输入空格")):n()},trigger:"blur"}],password:[{validator:function(t,n,a){""===n?a(new Error("请输入密码")):-1!==n.indexOf(" ")?a(new Error("不要输入空格")):(""!==e.newAdmin.password2&&e.$refs.newAdmin.validateField("password2"),a())},trigger:"blur"}],password2:[{validator:function(t,n,a){""===n?a(new Error("请再次输入密码")):-1!==n.indexOf(" ")?a(new Error("不要输入空格")):n!==e.newAdmin.password?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}]}}},mounted:function(){this.refreshPage()},methods:{refreshPage:function(){this.$store.commit("setLoadingStatus",!0),this.getAdminByPage(this.pageNo)},addAdmin:function(){this.showRegisterForm=!0},giveUpAdd:function(){this.showRegisterForm=!1,this.$refs.newAdmin.resetFields()},submitAdd:function(){var e=this;this.$refs.newAdmin.validate(function(t){t&&e.postAdmin({username:e.newAdmin.username,password:e.newAdmin.password})})},deleteAdmin:function(e){var t=this;this.$confirm("确定删除这个管理员账号?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.commit("setLoadingStatus",!0),t.removeAdmin(e),t.refreshPage()}).catch(function(){t.$message.info("已取消删除")})},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(n){e(),t.giveUpAdd()}).catch(function(e){})},getAdminAmount:function(){var e=this;this.$http.get(this.$store.state.host+"/adminpannel/admins/amount",{emulateJSON:!0}).then(function(t){var n=t.body.code;e.util.sessionCheck(e,n)&&(e.adminAmount=t.body.info)},this.util.returnFailHandler)},postAdmin:function(e){var t=this;this.$http.post(this.$store.state.host+"/adminpannel/admin",e,{emulateJSON:!0}).then(function(e){var n=e.body.code;if(t.util.sessionCheck(t,n)){switch(n){case 400:t.$message.error("输入为空！");break;case 412:t.$message.error("已存在的管理员名");break;case 200:return t.giveUpAdd(),t.$message.success("添加成功!"),void t.refreshPage();default:t.util.returnFailHandler(e)}t.$store.commit("setLoadingStatus",!1)}},this.util.returnFailHandler)},getAdminByPage:function(e){var t=this;this.$http.get(this.$store.state.host+"/adminpannel/admins/page/"+e+"/"+this.pageSize,{emulateJSON:!0}).then(function(e){t.$store.commit("setLoadingStatus",!1);var n=e.body.code;if(t.util.sessionCheck(t,n))switch(n){case 402:t.$message.error("页容量过大或非正");break;case 200:t.admins=e.body.info;break;default:t.util.returnFailHandler(e)}},this.util.returnFailHandler)},removeAdmin:function(e){var t=this;this.$http.delete(this.$store.state.host+"/adminpannel/admin/"+e,{emulateJSON:!0}).then(function(e){t.$store.commit("setLoadingStatus",!1);var n=e.body.code;if(t.util.sessionCheck(t,n))switch(n){case 404:t.$message.error("不存在的管理员");break;case 413:t.$message.error("不能删除超级管理员");break;case 414:t.$message.error("已删除的管理员");break;case 200:return t.$message.success("删除成功"),void t.refreshPage();default:t.util.returnFailHandler(e)}},this.util.returnFailHandler)}}}},516:function(e,t,n){var a=n(517);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(46)("5678a629",a,!0,{})},517:function(e,t,n){t=e.exports=n(45)(!1),t.push([e.i,"",""])},518:function(e,t,n){"use strict";function a(e){n(519)}var i=n(304),r=n(521),s=n(70),o=a,l=s(i.a,r.a,!1,o,"data-v-62f795c8",null);t.a=l.exports},519:function(e,t,n){var a=n(520);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(46)("b111cc42",a,!0,{})},520:function(e,t,n){t=e.exports=n(45)(!1),t.push([e.i,".container[data-v-62f795c8]{background-color:#aaccffaa;padding:20px}.table-wrapper[data-v-62f795c8]{background-color:#e0ffff;padding:10px}.upper-tools[data-v-62f795c8]{margin-bottom:20px;padding-top:auto}.tools-unit[data-v-62f795c8]{text-align:center;vertical-align:middle;margin-right:10px}.bottom-pagination[data-v-62f795c8]{margin-top:20px;text-align:center}.el-table[data-v-62f795c8]{margin:0}",""])},521:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"upper-tools"},[n("span",{staticClass:"tools-unit"},[n("el-button",{attrs:{type:"success",icon:"el-icon-refresh",circle:""},nativeOn:{click:function(t){return e.refreshPage(t)}}})],1),e._v(" "),n("span",{staticClass:"tools-unit"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},nativeOn:{click:function(t){return e.addAdmin(t)}}})],1)]),e._v(" "),n("div",{staticClass:"register-form-wrapper"},[n("el-dialog",{attrs:{width:"500px",title:"新管理员信息",visible:e.showRegisterForm,"before-close":e.handleClose,"modal-append-to-body":!1},on:{"update:visible":function(t){e.showRegisterForm=t}}},[n("el-form",{ref:"newAdmin",attrs:{rules:e.rules,"label-position":"top",model:e.newAdmin,"status-icon":""}},[n("el-form-item",{attrs:{prop:"username",label:"名称","label-width":"50px"}},[n("el-input",{attrs:{"auto-complete":"off",placeholder:"在此输入管理员名",clearable:""},model:{value:e.newAdmin.username,callback:function(t){e.$set(e.newAdmin,"username",t)},expression:"newAdmin.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password",label:"密码","label-width":"50px"}},[n("el-input",{attrs:{"auto-complete":"off",placeholder:"在此输入密码"},model:{value:e.newAdmin.password,callback:function(t){e.$set(e.newAdmin,"password",t)},expression:"newAdmin.password"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password2",label:"密码","label-width":"50px"}},[n("el-input",{attrs:{"auto-complete":"off",placeholder:"在此输入密码"},model:{value:e.newAdmin.password2,callback:function(t){e.$set(e.newAdmin,"password2",t)},expression:"newAdmin.password2"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"danger"},on:{click:e.giveUpAdd}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.submitAdd}},[e._v("确 定")])],1)],1)],1),e._v(" "),n("div",{staticClass:"table-wrapper"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.admins,border:"",stripe:"","tooltip-effect":"dark","max-height":"600"}},[n("el-table-column",{attrs:{label:"管理员id",prop:"id","header-align":"center",align:"center","min-width":"100"}}),e._v(" "),n("el-table-column",{attrs:{label:"管理员名",prop:"username","header-align":"center",align:"center","min-width":"200"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center","min-width":"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},nativeOn:{click:function(n){e.deleteAdmin(t.row.id)}}})],1)]}}])})],1)],1)])},i=[],r={render:a,staticRenderFns:i};t.a=r},522:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("admin-table")],1)},i=[],r={render:a,staticRenderFns:i};t.a=r}});