webpackJsonp([2],{176:function(e,t,i){"use strict";function a(e){i(442)}Object.defineProperty(t,"__esModule",{value:!0});var o=i(282),s=i(467),n=i(70),r=a,l=n(o.a,s.a,!1,r,null,null);t.default=l.exports},207:function(e,t,i){"use strict";t.a={props:{src:{type:String,required:!0}},name:"ImgUploader",data:function(){return{status:"ready",files:[],uploadingImgNum:0,uploadedImgNum:0,uploading:!1,percent:0,hide:!0}},watch:{uploadedImgNum:function(e){var t=this,i=Math.round(100*e/this.uploadingImgNum);t.percent=i/100,e==this.uploadingImgNum&&0!=e&&(this.status="finished")}},methods:{add:function(){this.$refs.file.click()},submit:function(){var e=this;if(0===this.files.length)return void console.warn("no file!");this.uploading=!0,this.uploadedImgNum=0,this.uploadingImgNum=this.files.length,this.files.forEach(function(t){if(t.size/1024/1024>2)e.$message.error("图片"+t.name+"过大，上传图片大小不能超过2M");else{var i=new FormData;i.append("userfile",t.file,t.name),e.$http.post(e.src,i).then(function(i){200===i.body.code?console.log("upload success!"):409===i.body.code?e.$message.error("图片"+t.name+"已经存在"):407===i.body.code?e.$message.error("图片"+t.name+"过大，上传图片大小不能超过2M"):e.$message.error("图片"+t.name+"上传失败"),e.uploadedImgNum++},function(i){e.$message.error("图片"+t.name+"上传失败"),console.log("error：error code "+i.body.code)})}})},remove:function(e){this.files.splice(e,1)},fileChanged:function(){for(var e=this.$refs.file.files,t=0;t<e.length;t++)if(!this.isContain(e[t])){var i={name:e[t].name,size:e[t].size,file:e[t]};this.html5Reader(e[t],i),this.files.push(i)}this.$refs.file.value=""},html5Reader:function(e,t){var i=this,a=new FileReader;a.onload=function(e){i.$set(t,"src",e.target.result)},a.readAsDataURL(e)},isContain:function(e){return this.files.find(function(t){return t.name===e.name&&t.size===e.size})},close:function(){this.hide=!0},final:function(){this.hide=!0,this.$emit("uploadSuccess")},open:function(){this.init(),this.hide=!1},init:function(){this.files=[],this.status="ready",this.uploading=!1}}}},232:function(e,t,i){"use strict";function a(e){i(447)}var o=i(284),s=i(449),n=i(70),r=a,l=n(o.a,s.a,!1,r,"data-v-035cbaa0",null);t.a=l.exports},233:function(e,t,i){e.exports=i.p+"../image/delete.svg?de1b48bfa30989e34c092145f5fed44f"},234:function(e,t,i){"use strict";function a(e){i(235)}var o=i(207),s=i(237),n=i(70),r=a,l=n(o.a,s.a,!1,r,null,null);t.a=l.exports},235:function(e,t,i){var a=i(236);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("492a225a",a,!0,{})},236:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,'.vue-uploader{display:block}.hide{display:none}.blocker{position:fixed;width:300%;height:300%;left:-100%;top:-100%;z-index:80;background-color:#ffffff6c}.vue-uploader-div{border:1px solid #e5e5e5;position:fixed;z-index:100;margin:auto;left:25%;top:25%;min-width:50%;max-width:50%;background-color:#fff}.file-list{min-height:100px;max-height:600px;overflow-y:auto}.vue-uploader-div .file-list{padding:10px 0}.vue-uploader-div .file-list:after{content:"";display:block;clear:both;visibility:hidden;line-height:0;height:0;font-size:0}.vue-uploader-div .file-list .file-item{float:left;position:relative;width:100px;text-align:center}.vue-uploader-div .file-list .file-item img{width:80px;height:80px;border:1px solid #ececec}.vue-uploader-div .file-list .file-item .file-remove{position:absolute;right:12px;display:none;top:4px;width:14px;height:14px;color:#fff;cursor:pointer;line-height:12px;border-radius:100%;transform:rotate(45deg);background:rgba(0,0,0,.5)}.vue-uploader-div .file-list .file-item:hover .file-remove{display:inline}.vue-uploader-div .file-list .file-item .file-name{margin:0;height:40px;word-break:break-all;font-size:14px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.vue-uploader-div .add{width:80px;height:80px;margin-left:10px;float:left;text-align:center;line-height:80px;border:1px dashed #ececec;font-size:30px;cursor:pointer}.vue-uploader-div .upload-func{display:flex;padding:10px;margin:0;background:#f8f8f8;border-top:1px solid #ececec}.vue-uploader-div .upload-func .progress-bar{flex-grow:1}.vue-uploader-div .upload-func .progress-bar section{margin-top:5px;background:#00b4aa;border-radius:3px;text-align:center;color:#fff;font-size:12px;transition:all .5s ease}.vue-uploader-div .upload-func .operation-box{flex-grow:0;padding-left:10px}.vue-uploader-div .upload-func .operation-box button{padding:4px 12px;color:#fff;background:#007acc;border:none;border-radius:2px;cursor:pointer}.vue-uploader-div>input[type=file]{display:none}',""])},237:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:[e.hide?"hide":"","vue-uploader"]},[i("div",{staticClass:"blocker"}),e._v(" "),i("div",{staticClass:"vue-uploader-div"},[i("div",{staticClass:"file-list"},[e._l(e.files,function(t,a){return i("section",{key:a,staticClass:"file-item draggable-item"},[i("img",{attrs:{src:t.src,alt:"",ondragstart:"return false;"}}),e._v(" "),i("p",{staticClass:"file-name"},[e._v(e._s(t.name))]),e._v(" "),i("span",{staticClass:"file-remove",on:{click:function(t){e.remove(a)}}},[e._v("+")])])}),e._v(" "),"ready"==e.status?i("section",{staticClass:"file-item"},[i("div",{staticClass:"add",on:{click:e.add}},[i("span",[e._v("+")])])]):e._e()],2),e._v(" "),i("section",{staticClass:"upload-func"},[i("div",{staticClass:"progress-bar"},[e.uploading?i("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:100*e.percent}}):e._e()],1),e._v(" "),i("div",{staticClass:"operation-box"},["finished"!=e.status?i("button",{on:{click:e.close}},[e._v("关闭")]):e._e(),e._v(" "),"ready"==e.status?i("button",{on:{click:e.submit}},[e._v("上传")]):e._e(),e._v(" "),"finished"==e.status?i("button",{on:{click:e.final}},[e._v("完成")]):e._e()])]),e._v(" "),i("input",{ref:"file",attrs:{type:"file",accept:"image/*",multiple:"multiple"},on:{change:e.fileChanged}})])])},o=[],s={render:a,staticRenderFns:o};t.a=s},282:function(e,t,i){"use strict";var a=i(444),o=i(451),s=i(234);t.a={props:{id:{type:Number}},name:"EditorComponent",components:{EditorAsideNav:a.a,EditorPanel:o.a,ImgUploader:s.a},data:function(){return{images:[],bookInfo:{},page:1,searchingMode:!1,keyword:"",imageAmount:0}},mounted:function(){this.$store.commit("setLoadingStatus",!1),this.refresh(),this.$store.commit("setEditStatus",!1)},watch:{page:function(e){this.loadImg(e)}},beforeRouteLeave:function(e,t,i){var a=this;this.$confirm("书籍的详细信息将不会自动保存，仍确认离开?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){i()}).catch(function(){a.$message.info("已取消离开")})},methods:{refresh:function(){this.loadBookData(this.$route.params.id),this.loadImg(this.page)},searchImg:function(e){if(""==e)return this.searchingMode=!1,void this.loadImg(this.page);this.searchingMode=!0,this.keyword=e,this.loadImg(this.page)},loadBookData:function(e){var t=this;this.$http.get(this.$store.state.host+"/adminpannel/book/"+e,{emulateJSON:!0}).then(function(e){t.util.sessionCheck(t,e.body.code)&&200===e.body.code?(t.bookInfo=e.body.info,t.$refs.detailEditor.loadData(t.bookInfo)):t.$message.error("加载书籍信息失败")},this.util.returnFailHandler)},changePage:function(e){this.page=e},getImgAmount:function(){var e=this;if(this.searchingMode){var t={keyword:this.keyword};this.$http.post(this.$store.state.host+"/adminpannel/images/search/0/0",t,{emulateJSON:!0}).then(function(t){e.util.sessionCheck(e,t.body.code)&&200===t.body.code&&(e.imageAmount=e.util.toValidNumber(t.body.info))},this.util.returnFailHandler)}else this.$http.get(this.$store.state.host+"/adminpannel/images/page/0/0",{emulateJSON:!0}).then(function(t){e.util.sessionCheck(e,t.body.code)&&200===t.body.code&&(e.imageAmount=e.util.toValidNumber(t.body.info))},this.util.returnFailHandler)},loadImg:function(e){var t=this;if(this.getImgAmount(),this.searchingMode){var i={keyword:this.keyword};this.$http.post(this.$store.state.host+"/adminpannel/images/search/"+e+"/25",i,{emulateJSON:!0}).then(function(i){t.util.sessionCheck(t,i.body.code)&&200===i.body.code?t.images=i.body.info:t.$message.error("搜索第"+e+"页图片信息失败")},this.util.returnFailHandler)}else this.$http.get(this.$store.state.host+"/adminpannel/images/page/"+e,{emulateJSON:!0}).then(function(i){t.util.sessionCheck(t,i.body.code)&&200===i.body.code?t.images=i.body.info:t.$message.error("加载第"+e+"页图片信息失败")},this.util.returnFailHandler)},back:function(){this.$router.push({path:this.$store.state.host+"/adminpannel/books"})},deleteUploadedImg:function(e){var t=this;this.$confirm("此操作将删除与此图片关联的所有书籍封面、轮播图等, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.delete(t.$store.state.host+"/adminpannel/image/id/"+e).then(function(e){t.util.sessionCheck(t,e.body.code)&&200===e.body.code?(t.$message.success("图片删除成功"),t.loadImg(t.page)):t.$message.error("图片删除失败")},t.util.returnFailHandler),t.loadImg(t.page)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},uploadImg:function(){this.$refs.uploader.open()},saveData:function(){console.log("savedata"),this.$refs.detailEditor.saveData()},saveDetail:function(e){var t=this;this.bookInfo=e,this.$http.post(this.$store.state.host+"/adminpannel/book",this.bookInfo,{emulateJSON:!0}).then(function(e){t.util.sessionCheck(t,e.body.code)&&200===e.body.code?t.$message.success("保存书籍信息成功"):t.$message.error("保存书籍信息失败，请联系系统管理员")},this.util.returnFailHandler)}}}},283:function(e,t,i){"use strict";var a=i(232),o=i(285);t.a={name:"EditorAsideNav",components:{UploadedImg:a.a},props:["images","totalImgs"],data:function(){return{searchKeyword:"",currentPage:1}},watch:{currentPage:function(e){this.$emit("changePage",e)}},methods:{selectingImg:function(e,t){o.a.$emit("selectImg",e,t)}}}},284:function(e,t,i){"use strict";t.a={name:"UploadedImg",props:{img:{id:{type:Number,required:!0},url:String}}}},285:function(e,t,i){"use strict";var a=i(2);t.a=new a.default},286:function(e,t,i){"use strict";var a=i(232),o=i(454),s=i(458),n=i(462),r=i(285);t.a={name:"EditorPanel",components:{UploadedImg:a.a,ImageAdder:o.a,detailSection:s.a,detailSectionImg:n.a},props:{},data:function(){return{carousel:[],bookCover:"",coverId:0,book:{},details:[],selectingCarousel:!1,selectingCover:!1,isEditing:!1,newText:"",nextSectionId:0}},computed:{haveCover:function(){return 0!==this.coverId},addCarouselGuide:function(){return this.selectingCarousel?"点击图库添加图片":"点此添加轮播图"},addCoverGuide:function(){return this.selectingCover?"点击图库添加图片":"点此添加封面"}},created:function(){var e=this;r.a.$on("selectImg",function(t,i){e.selectingCarousel?e.postCarousel(t,i):e.selectingCover?e.postCover(t,i):e.details.push({isText:!1,id:e.nextSectionId++,url:t})})},methods:{loadData:function(e){var t=this;this.book=e,this.bookCover=e.cover,this.coverId=this.util.toValidNumber(e.cover_id),this.details=JSON.parse(e.details),this.details.forEach(function(e){t.nextSectionId=Math.max(t.nextSectionId,e.id)}),this.nextSectionId++,this.carousel=[],e.images.forEach(function(e){t.carousel.push(e)})},saveData:function(){this.book.details=JSON.stringify(this.details),this.book.images=this.carousel,this.$emit("saveDetail",this.book)},deleteSection:function(e){this.details=this.details.filter(function(t){return t.id!==e})},addCarouseling:function(){this.selectingCover=!1,this.selectingCarousel=!this.selectingCarousel},addCovering:function(){this.selectingCarousel=!1,this.selectingCover=!this.selectingCover},deleteCarousel:function(e){var t=this,i=e;this.$http.delete(this.$store.state.host+"/adminpannel/image/"+i+"/"+this.$route.params.id,{emulateJSON:!0}).then(function(i){t.util.sessionCheck(t,i.body.code)&&200===i.body.code?(t.$message.success("删除轮播图成功"),t.carousel=t.carousel.filter(function(t){return t.id!==e})):t.$message.error("删除轮播图出现问题，请联系系统管理员")},this.util.returnFailHandler)},postCarousel:function(e,t){var i=this;this.$http.put(this.$store.state.host+"/adminpannel/image/"+t+"/"+this.$route.params.id,{emulateJSON:!0}).then(function(a){i.util.sessionCheck(i,a.body.code)&&200===a.body.code?(i.$message.success("添加轮播图成功"),i.carousel.push({id:t,url:e}),i.selectingCarousel=!1):i.$message.error("添加轮播图失败，请联系系统管理员")},this.util.returnFailHandler)},deleteCover:function(){var e=this;if(0!==this.coverId){var t=this.coverId;this.$http.delete(this.$store.state.host+"/adminpannel/image/cover/"+t+"/"+this.$route.params.id,{emulateJSON:!0}).then(function(t){e.util.sessionCheck(e,t.body.code)&&200===t.body.code?(e.$message.success("删除封面成功"),e.bookCover="",e.coverId=0):e.$message.error("删除封面出现问题，请联系系统管理员")},this.util.returnFailHandler)}},postCover:function(e,t){var i=this;this.$http.put(this.$store.state.host+"/adminpannel/image/cover/"+t+"/"+this.$route.params.id,{emulateJSON:!0}).then(function(a){i.util.sessionCheck(i,a.body.code)&&200===a.body.code?(i.$message.success("添加封面成功"),i.bookCover=e,i.coverId=t,i.selectingCover=!1):i.$message.error("添加封面出现问题，请联系系统管理员")},this.util.returnFailHandler)},addSection:function(){this.details.push({isText:!0,id:this.nextSectionId++,text:this.newText}),this.newText="",this.isEditing=!1}}}},287:function(e,t,i){"use strict";t.a={name:"ImageAdder",props:{text:String,selecting:Boolean}}},288:function(e,t,i){"use strict";t.a={name:"detailSection",props:{value:{type:String,default:""},id:{type:Number,default:1},newSection:{type:Boolean,default:!1}},data:function(){return{innerText:this.value}},methods:{changeText:function(){this.$emit("input",this.innerText)}}}},289:function(e,t,i){"use strict";var a=i(232);t.a={name:"detailSectionImg",components:{UploadedImg:a.a},props:{id:{type:Number,default:1},url:{type:String,default:""}}}},442:function(e,t,i){var a=i(443);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("351fee3c",a,!0,{})},443:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".editor{height:100%;overflow:hidden}",""])},444:function(e,t,i){"use strict";function a(e){i(445)}var o=i(283),s=i(450),n=i(70),r=a,l=n(o.a,s.a,!1,r,"data-v-8875c92e",null);t.a=l.exports},445:function(e,t,i){var a=i(446);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("6dea8ab8",a,!0,{})},446:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".el-button[data-v-8875c92e]{font-size:22px}div.editor-aside-nav[data-v-8875c92e]{position:fixed;left:0;width:450px;height:100%;margin:0;padding:0;background-color:#292d36;z-index:10;box-shadow:0 0 3px rgba(63,70,82,.5)}.page-div[data-v-8875c92e]{position:fixed;bottom:0;width:449px;box-shadow:0 0 65px rgba(63,70,82,.5);background-color:#fff;padding:7px 0}.image-name[data-v-8875c92e]{width:150px;word-break:break-all;word-wrap:break-word}.horizontal[data-v-8875c92e]{float:left;display:block}.button-li[data-v-8875c92e]{margin:12px}.circular-button[data-v-8875c92e]{padding:5px;height:60px;width:60px;border-radius:30px;font-size:10px;text-align:center;vertical-align:middle;cursor:pointer;user-select:none;background-image:none;background-color:#777;border:none;box-shadow:0 0 3px rgba(63,70,82,.5)}.circular-button[data-v-8875c92e]:active{background-color:#000;transition:all .1s ease-in}.circular-button[data-v-8875c92e]:hover{opacity:.75;transition:all .1s ease-in}.icon-svg[data-v-8875c92e]{width:30px}.img-div[data-v-8875c92e]{padding:5px 5px 200px;height:calc(100% - 350px);background-color:#434a57;overflow-x:auto}.img-li[data-v-8875c92e]{margin:10px;width:40%;min-height:220px}.remove-img-icon[data-v-8875c92e]{height:0;position:absolute;top:.5em;right:.5em;color:red}.uploaded-img[data-v-8875c92e]{cursor:pointer;float:left}",""])},447:function(e,t,i){var a=i(448);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("aedb1800",a,!0,{})},448:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".remove-img-span[data-v-035cbaa0]{position:absolute;top:.5em;right:.5em;opacity:.3;z-index:100}.remove-img-span[data-v-035cbaa0]:hover{opacity:.9;transition:all .1s ease-in}.remove-img-icon[data-v-035cbaa0]{height:25px;width:25px}.remove-img-icon[data-v-035cbaa0]:hover{height:28px;width:28px;transition:all .1s ease-in}.uploaded-img-div[data-v-035cbaa0]{opacity:.75;position:relative;width:100%;cursor:pointer;float:left}.uploaded-img-div[data-v-035cbaa0]:hover{opacity:1;transition:all .1s ease-in}.uploaded-img[data-v-035cbaa0]{width:150px;height:150px}",""])},449:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uploaded-img-div"},[a("span",{staticClass:"remove-img-span",on:{click:function(t){e.$emit("delete",e.img.id)}}},[a("img",{staticClass:"remove-img-icon",attrs:{src:i(233)}})]),e._v(" "),a("img",{staticClass:"uploaded-img",attrs:{src:e.img.url},on:{click:function(t){e.$emit("selectingImg",e.img.url,e.img.id)}}})])},o=[],s={render:a,staticRenderFns:o};t.a=s},450:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editor-aside-nav"},[i("div",{staticClass:"button-div"},[i("ul",{staticStyle:{height:"70px"}},[i("li",{staticClass:"horizontal button-li"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-back button-icon",circle:""},on:{click:function(t){e.$emit("back")}}})],1),e._v(" "),i("li",{staticClass:"horizontal button-li"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-upload2 button-icon",circle:""},on:{click:function(t){e.$emit("uploadImg")}}})],1),e._v(" "),i("li",{staticClass:"horizontal button-li"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-refresh button-icon",circle:""},on:{click:function(t){e.$emit("refresh")}}})],1),e._v(" "),i("li",{staticClass:"horizontal button-li",staticStyle:{float:"right","margin-right":"30px"}},[i("el-button",{attrs:{type:"danger",icon:"el-icon-check button-icon",circle:""},on:{click:function(t){e.$emit("saveData")}}})],1)]),e._v(" "),i("hr",{staticStyle:{"border-style":"dashed",color:"brown","border-width":"2px"}}),e._v(" "),i("el-form",{staticStyle:{"padding-left":"40px","margin-top":"15px"},attrs:{inline:!0},nativeOn:{submit:function(t){t.preventDefault(),e.$emit("search",e.searchKeyword)}}},[i("el-form-item",{staticStyle:{margin:"3px"}},[i("el-input",{staticStyle:{width:"275px"},attrs:{placeholder:"搜索"},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}})],1),e._v(" "),i("el-form-item",{staticStyle:{"padding-left":"20px"}},[i("el-button",{attrs:{icon:"el-icon-search button-icon",circle:""},on:{click:function(t){e.$emit("search",e.searchKeyword)}}})],1)],1)],1),e._v(" "),i("div",{staticClass:"img-div"},[i("ul",{staticClass:"img-ul"},e._l(e.images,function(t){return i("li",{key:t.id,staticClass:"horizontal img-li"},[i("uploaded-img",{attrs:{img:t},on:{delete:function(t){e.$emit("deleteUploadedImg",t)},selectingImg:e.selectingImg}}),e._v(" "),i("div",{staticClass:"image-name"},[e._v(e._s(t.url.substring(t.url.lastIndexOf("/")+1,t.url.length)))])],1)}))]),e._v(" "),i("div",{staticClass:"page-div"},[i("div",[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":25,layout:"prev, pager, next, jumper","pager-count":5,total:e.totalImgs},on:{"update:currentPage":function(t){e.currentPage=t}}})],1)])])},o=[],s={render:a,staticRenderFns:o};t.a=s},451:function(e,t,i){"use strict";function a(e){i(452)}var o=i(286),s=i(466),n=i(70),r=a,l=n(o.a,s.a,!1,r,"data-v-75fee872",null);t.a=l.exports},452:function(e,t,i){var a=i(453);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("33543e98",a,!0,{})},453:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".editor-panel[data-v-75fee872]{position:absolute;padding:30px 30px 30px calc(250px + 6%);height:100%}.editing-block[data-v-75fee872]{width:800px}.upper-block[data-v-75fee872]{margin:auto auto 3em}.block-cell[data-v-75fee872]{text-align:left;width:600px;margin:auto auto 1em;padding:1em}.add-text-button[data-v-75fee872],.book-detail-editor[data-v-75fee872],.book-info-editor[data-v-75fee872]{background-color:#fff;box-shadow:0 0 6px rgba(63,70,82,.5)}.guide-text[data-v-75fee872]{color:#6c6d6f}.carousel-editor[data-v-75fee872]{height:200px;overflow-x:auto}.horizontal[data-v-75fee872]{float:left;display:block}.img-li[data-v-75fee872]{margin:10px;width:40%}.info-editor[data-v-75fee872]{height:200px}.cover-editor[data-v-75fee872]{float:left;height:200px}.info-input-block[data-v-75fee872]{float:left;padding-left:30px;width:50%}.input-block[data-v-75fee872]{opacity:.7;color:#6c6d6f;border:1px dashed #6c6d6f}.add-text-button[data-v-75fee872]{margin-left:45%;width:80px;text-align:center;border:none;border-radius:100px}.add-text-button[data-v-75fee872]:hover{box-shadow:0 0 16px #60d0ff;transition:all .1s ease-in}.input-block[data-v-75fee872]:hover{opacity:1;transition:all .1s ease-in}.cover-edit-block[data-v-75fee872]{float:left;width:30%;padding-left:30px;padding-right:30px;margin-top:20px}",""])},454:function(e,t,i){"use strict";function a(e){i(455)}var o=i(287),s=i(457),n=i(70),r=a,l=n(o.a,s.a,!1,r,null,null);t.a=l.exports},455:function(e,t,i){var a=i(456);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("11915abf",a,!0,{})},456:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".img-adder{height:145px;width:145px;text-align:center;line-height:145px;border:2px dashed #6c6d6f;overflow:hidden;cursor:pointer;opacity:.7}.img-selecting{background-color:#afafaf6b}.img-adder:hover{opacity:1;transition:all .1s ease-in}.img-adder:active{opacity:.7;transition:all .1s ease-in}",""])},457:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:[e.selecting?"img-selecting":"","img-adder"],on:{click:function(t){e.$emit("addImage")}}},[e._v("\n  "+e._s(e.text)+"\n")])},o=[],s={render:a,staticRenderFns:o};t.a=s},458:function(e,t,i){"use strict";function a(e){i(459)}var o=i(288),s=i(461),n=i(70),r=a,l=n(o.a,s.a,!1,r,"data-v-ad119938",null);t.a=l.exports},459:function(e,t,i){var a=i(460);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("6c958f2e",a,!0,{})},460:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".detail-section-div[data-v-ad119938]{position:relative;padding:10px 30px 10px 10px}.detail-section-div[data-v-ad119938]:hover{border:1px dashed #6cf;padding:9px 29px 9px 9px}.detail-section:hover>.delete-span[data-v-ad119938]{display:inline}.delete-span[data-v-ad119938]{display:none;position:absolute;top:-10px;right:-10px;opacity:.3;z-index:100}.delete-span[data-v-ad119938]:hover{opacity:.9;transition:all .1s ease-in}.remove-img-span[data-v-ad119938]{position:absolute;top:.25em;right:.25em;opacity:.3;z-index:100}.remove-img-span[data-v-ad119938]:hover{opacity:.9;transition:all .1s ease-in}.remove-img-icon[data-v-ad119938]{height:20px;width:20px;cursor:pointer}",""])},461:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail-section-div"},[e.newSection?e._e():a("span",{staticClass:"remove-img-span",on:{click:function(t){e.$emit("delete",e.id)}}},[a("img",{staticClass:"remove-img-icon",attrs:{src:i(233)}})]),e._v(" "),a("el-input",{attrs:{type:"textarea",autosize:"",autofocus:e.newSection,placeholder:"请输入内容"},on:{change:e.changeText},model:{value:e.innerText,callback:function(t){e.innerText=t},expression:"innerText"}})],1)},o=[],s={render:a,staticRenderFns:o};t.a=s},462:function(e,t,i){"use strict";function a(e){i(463)}var o=i(289),s=i(465),n=i(70),r=a,l=n(o.a,s.a,!1,r,"data-v-acb687ec",null);t.a=l.exports},463:function(e,t,i){var a=i(464);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(46)("0e27d7b4",a,!0,{})},464:function(e,t,i){t=e.exports=i(45)(!1),t.push([e.i,".detail-section[data-v-acb687ec]{overflow:hidden;padding:10px 30px 10px 10px}.uploaded-img[data-v-acb687ec]{margin:auto;width:60%}.detail-section[data-v-acb687ec]:hover{border:1px dashed #6cf;padding:9px 29px 9px 9px}.detail-section:hover>.delete-span[data-v-acb687ec]{display:inline}.delete-span[data-v-acb687ec]{display:none;position:absolute;top:-10px;right:-10px;opacity:.3;z-index:100}.delete-span[data-v-acb687ec]:hover{opacity:.9;transition:all .1s ease-in}.remove-img-span[data-v-acb687ec]{position:absolute;top:.25em;right:.25em;opacity:.3;z-index:100}.remove-img-span[data-v-acb687ec]:hover{opacity:.9;transition:all .1s ease-in}.remove-img-icon[data-v-acb687ec]{height:20px;width:20px}.uploaded-img-div[data-v-acb687ec]{opacity:.75;position:relative;width:100%;cursor:pointer;float:left;text-align:center}.uploaded-img-div[data-v-acb687ec]:hover{opacity:1;transition:all .1s ease-in}.uploaded-img[data-v-acb687ec]{width:50%}",""])},465:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail-section"},[a("div",{staticClass:"uploaded-img-div"},[a("span",{staticClass:"remove-img-span",on:{click:function(t){e.$emit("delete",e.id)}}},[a("img",{staticClass:"remove-img-icon",attrs:{src:i(233)}})]),e._v(" "),a("img",{staticClass:"uploaded-img",attrs:{src:e.url}})])])},o=[],s={render:a,staticRenderFns:o};t.a=s},466:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editor-panel"},[i("div",{staticClass:"editing-block"},[i("div",{staticClass:"upper-block"},[i("div",{staticClass:"block-cell book-info-editor"},[i("p",{staticClass:"guide-text"},[e._v("在此编辑书籍的轮播图：")]),e._v(" "),i("div",{staticClass:"carousel-editor"},[i("ul",{staticClass:"img-ul"},[e._l(e.carousel,function(t){return i("li",{key:t.id,staticClass:"horizontal img-li"},[i("uploaded-img",{attrs:{img:t},on:{delete:e.deleteCarousel}})],1)}),e._v(" "),i("li",{staticClass:"horizontal img-li"},[i("image-adder",{attrs:{text:e.addCarouselGuide,selecting:e.selectingCarousel},on:{addImage:e.addCarouseling}})],1)],2)]),e._v(" "),i("hr"),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("p",{staticClass:"guide-text"},[e._v("在此选择书籍封面：")])]),e._v(" "),i("el-col",{attrs:{span:12}},[i("p",{staticClass:"guide-text"},[e._v("在此编辑书籍简介：")])])],1),e._v(" "),i("div",{staticClass:"info-editor"},[i("div",{staticClass:"cover-edit-block"},[i("div",{staticClass:"cover-editor"},[e.haveCover?i("div",{staticStyle:{height:"200px",width:"200px"}},[i("uploaded-img",{attrs:{img:{url:e.bookCover}},on:{delete:e.deleteCover}})],1):i("div",[i("image-adder",{attrs:{text:e.addCoverGuide,selecting:e.selectingCover},on:{addImage:e.addCovering}})],1)])]),e._v(" "),i("div",{staticClass:"info-input-block"},[i("el-input",{attrs:{type:"textarea",rows:8,placeholder:"在此输入书籍简介"},model:{value:e.book.brief,callback:function(t){e.$set(e.book,"brief",t)},expression:"book.brief"}})],1)])],1)]),e._v(" "),i("div",[i("div",{staticClass:"block-cell book-detail-editor"},[i("p",{staticClass:"guide-text"},[e._v("在此编辑书籍详情：")]),e._v(" "),e._l(e.details,function(t){return t.isText?i("detail-section",{key:t.id,attrs:{id:t.id},on:{delete:e.deleteSection},model:{value:t.text,callback:function(i){e.$set(t,"text",i)},expression:"detail.text"}}):i("detail-section-img",{key:t.id,attrs:{id:t.id,url:t.url},on:{delete:e.deleteSection}})})],2),e._v(" "),i("div",{staticClass:"block-cell input-block"},[e.isEditing?i("detail-section",{staticClass:"text-editor",attrs:{newSection:!0},model:{value:e.newText,callback:function(t){e.newText=t},expression:"newText"}}):i("section",{staticStyle:{margin:"0"},on:{click:function(t){e.isEditing=!0}}},[e._v("点击此处新增文字，点击左侧图库新增图片")])],1),e._v(" "),e.isEditing?i("button",{staticClass:"block-cell add-text-button",on:{click:e.addSection}},[e._v("\n        添加\n      ")]):e._e()])])])},o=[],s={render:a,staticRenderFns:o};t.a=s},467:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editor"},[i("img-uploader",{ref:"uploader",attrs:{src:e.$store.state.host+"/adminpannel/image"},on:{uploadSuccess:function(t){e.loadImg(e.page)}}}),e._v(" "),i("editor-aside-nav",{attrs:{images:e.images,totalImgs:e.imageAmount},on:{back:e.back,refresh:e.refresh,uploadImg:e.uploadImg,saveData:e.saveData,changePage:e.changePage,search:e.searchImg,deleteUploadedImg:e.deleteUploadedImg}}),e._v(" "),i("editor-panel",{ref:"detailEditor",on:{saveDetail:e.saveDetail}})],1)},o=[],s={render:a,staticRenderFns:o};t.a=s}});